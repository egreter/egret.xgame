var PF;!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.PF=e()}}(function(){return function o(r,s,a){function l(i,e){if(!s[i]){if(!r[i]){var t="function"==typeof require&&require;if(!e&&t)return t(i,!0);if(h)return h(i,!0);throw new Error("Cannot find module '"+i+"'")}var n=s[i]={exports:{}};r[i][0].call(n.exports,function(e){var t=r[i][1][e];return l(t||e)},n,n.exports,o,r,s,a)}return s[i].exports}for(var h="function"==typeof require&&require,e=0;e<a.length;e++)l(a[e]);return l}({1:[function(e,t,i){t.exports=e("./lib/heap")},{"./lib/heap":2}],2:[function(e,t,i){(function(){var e,c,l,f,d,i,h,n,g,b,o,r,s,u,p;l=Math.floor,b=Math.min,c=function(e,t){return e<t?-1:t<e?1:0},g=function(e,t,i,n,o){var r;if(null==i&&(i=0),null==o&&(o=c),i<0)throw new Error("lo must be non-negative");for(null==n&&(n=e.length);i<n;)o(t,e[r=l((i+n)/2)])<0?n=r:i=r+1;return[].splice.apply(e,[i,i-i].concat(t)),t},i=function(e,t,i){return null==i&&(i=c),e.push(t),u(e,0,e.length-1,i)},d=function(e,t){var i,n;return null==t&&(t=c),i=e.pop(),e.length?(n=e[0],e[0]=i,p(e,0,t)):n=i,n},n=function(e,t,i){var n;return null==i&&(i=c),n=e[0],e[0]=t,p(e,0,i),n},h=function(e,t,i){var n;return null==i&&(i=c),e.length&&i(e[0],t)<0&&(t=(n=[e[0],t])[0],e[0]=n[1],p(e,0,i)),t},f=function(i,e){var t,n,o,r,s,a;for(null==e&&(e=c),s=[],n=0,o=(r=function(){a=[];for(var e=0,t=l(i.length/2);0<=t?e<t:t<e;0<=t?e++:e--)a.push(e);return a}.apply(this).reverse()).length;n<o;n++)t=r[n],s.push(p(i,t,e));return s},s=function(e,t,i){var n;if(null==i&&(i=c),-1!==(n=e.indexOf(t)))return u(e,0,n,i),p(e,n,i)},o=function(e,t,i){var n,o,r,s,a;if(null==i&&(i=c),!(o=e.slice(0,t)).length)return o;for(f(o,i),r=0,s=(a=e.slice(t)).length;r<s;r++)n=a[r],h(o,n,i);return o.sort(i).reverse()},r=function(e,t,i){var n,o,r,s,a,l,h,u,p;if(null==i&&(i=c),10*t<=e.length){if(!(r=e.slice(0,t).sort(i)).length)return r;for(o=r[r.length-1],s=0,l=(h=e.slice(t)).length;s<l;s++)i(n=h[s],o)<0&&(g(r,n,0,null,i),r.pop(),o=r[r.length-1]);return r}for(f(e,i),p=[],a=0,u=b(t,e.length);0<=u?a<u:u<a;0<=u?++a:--a)p.push(d(e,i));return p},u=function(e,t,i,n){var o,r,s;for(null==n&&(n=c),o=e[i];t<i&&n(o,r=e[s=i-1>>1])<0;)e[i]=r,i=s;return e[i]=o},p=function(e,t,i){var n,o,r,s,a;for(null==i&&(i=c),o=e.length,r=e[a=t],n=2*t+1;n<o;)(s=n+1)<o&&!(i(e[n],e[s])<0)&&(n=s),e[t]=e[n],n=2*(t=n)+1;return e[t]=r,u(e,a,t,i)},e=function(){function t(e){this.cmp=null!=e?e:c,this.nodes=[]}return t.push=i,t.pop=d,t.replace=n,t.pushpop=h,t.heapify=f,t.updateItem=s,t.nlargest=o,t.nsmallest=r,t.prototype.push=function(e){return i(this.nodes,e,this.cmp)},t.prototype.pop=function(){return d(this.nodes,this.cmp)},t.prototype.peek=function(){return this.nodes[0]},t.prototype.contains=function(e){return-1!==this.nodes.indexOf(e)},t.prototype.replace=function(e){return n(this.nodes,e,this.cmp)},t.prototype.pushpop=function(e){return h(this.nodes,e,this.cmp)},t.prototype.heapify=function(){return f(this.nodes,this.cmp)},t.prototype.updateItem=function(e){return s(this.nodes,e,this.cmp)},t.prototype.clear=function(){return this.nodes=[]},t.prototype.empty=function(){return 0===this.nodes.length},t.prototype.size=function(){return this.nodes.length},t.prototype.clone=function(){var e;return(e=new t).nodes=this.nodes.slice(0),e},t.prototype.toArray=function(){return this.nodes.slice(0)},t.prototype.insert=t.prototype.push,t.prototype.top=t.prototype.peek,t.prototype.front=t.prototype.peek,t.prototype.has=t.prototype.contains,t.prototype.copy=t.prototype.clone,t}(),(null!=t?t.exports:void 0)?t.exports=e:window.Heap=e}).call(this)},{}],3:[function(e,t,i){t.exports={Always:1,Never:2,IfAtMostOneObstacle:3,OnlyWhenNoObstacles:4}},{}],4:[function(e,t,i){var a=e("./Node"),d=e("./DiagonalMovement");function l(e,t,i){this.width=e,this.height=t,this.nodes=this._buildNodes(e,t,i)}l.prototype._buildNodes=function(e,t,i){var n,o,r=new Array(t);for(n=0;n<t;++n)for(r[n]=new Array(e),o=0;o<e;++o)r[n][o]=new a(o,n);if(void 0===i)return r;if(i.length!==t||i[0].length!==e)throw new Error("Matrix size does not fit");for(n=0;n<t;++n)for(o=0;o<e;++o)i[n][o]&&(r[n][o].walkable=!1);return r},l.prototype.getNodeAt=function(e,t){return this.nodes[t][e]},l.prototype.isWalkableAt=function(e,t){return this.isInside(e,t)&&this.nodes[t][e].walkable},l.prototype.isInside=function(e,t){return 0<=e&&e<this.width&&0<=t&&t<this.height},l.prototype.setWalkableAt=function(e,t,i){this.nodes[t][e].walkable=i},l.prototype.getNeighbors=function(e,t){var i=e.x,n=e.y,o=[],r=!1,s=!1,a=!1,l=!1,h=!1,u=!1,p=!1,c=!1,f=this.nodes;if(this.isWalkableAt(i,n-1)&&(o.push(f[n-1][i]),r=!0),this.isWalkableAt(i+1,n)&&(o.push(f[n][i+1]),a=!0),this.isWalkableAt(i,n+1)&&(o.push(f[n+1][i]),h=!0),this.isWalkableAt(i-1,n)&&(o.push(f[n][i-1]),p=!0),t===d.Never)return o;if(t===d.OnlyWhenNoObstacles)s=p&&r,l=r&&a,u=a&&h,c=h&&p;else if(t===d.IfAtMostOneObstacle)s=p||r,l=r||a,u=a||h,c=h||p;else{if(t!==d.Always)throw new Error("Incorrect value of diagonalMovement");c=u=l=s=!0}return s&&this.isWalkableAt(i-1,n-1)&&o.push(f[n-1][i-1]),l&&this.isWalkableAt(i+1,n-1)&&o.push(f[n-1][i+1]),u&&this.isWalkableAt(i+1,n+1)&&o.push(f[n+1][i+1]),c&&this.isWalkableAt(i-1,n+1)&&o.push(f[n+1][i-1]),o},l.prototype.clone=function(){var e,t,i=this.width,n=this.height,o=this.nodes,r=new l(i,n),s=new Array(n);for(e=0;e<n;++e)for(s[e]=new Array(i),t=0;t<i;++t)s[e][t]=new a(t,e,o[e][t].walkable);return r.nodes=s,r},t.exports=l},{"./DiagonalMovement":3,"./Node":6}],5:[function(e,t,i){t.exports={manhattan:function(e,t){return e+t},euclidean:function(e,t){return Math.sqrt(e*e+t*t)},octile:function(e,t){var i=Math.SQRT2-1;return e<t?i*e+t:i*t+e},chebyshev:function(e,t){return Math.max(e,t)}}},{}],6:[function(e,t,i){t.exports=function(e,t,i){this.x=e,this.y=t,this.walkable=void 0===i||i}},{}],7:[function(e,t,i){function o(e){for(var t=[[e.x,e.y]];e.parent;)e=e.parent,t.push([e.x,e.y]);return t.reverse()}function v(e,t,i,n){var o,r,s,a,l,h,u=Math.abs,p=[];for(o=e<i?1:-1,r=t<n?1:-1,l=(s=u(i-e))-(a=u(n-t));p.push([e,t]),e!==i||t!==n;)-a<(h=2*l)&&(l-=a,e+=o),h<s&&(l+=s,t+=r);return p}i.backtrace=o,i.biBacktrace=function(e,t){var i=o(e),n=o(t);return i.concat(n.reverse())},i.pathLength=function(e){var t,i,n,o,r,s=0;for(t=1;t<e.length;++t)i=e[t-1],n=e[t],o=i[0]-n[0],r=i[1]-n[1],s+=Math.sqrt(o*o+r*r);return s},i.interpolate=v,i.expandPath=function(e){var t,i,n,o,r,s,a=[],l=e.length;if(l<2)return a;for(r=0;r<l-1;++r)for(t=e[r],i=e[r+1],o=(n=v(t[0],t[1],i[0],i[1])).length,s=0;s<o-1;++s)a.push(n[s]);return a.push(e[l-1]),a},i.smoothenPath=function(e,t){var i,n,o,r,s,a,l,h,u,p,c=t.length,f=t[0][0],d=t[0][1],g=t[c-1][0],b=t[c-1][1];for(o=[[i=f,n=d]],r=2;r<c;++r){for(l=v(i,n,(a=t[r])[0],a[1]),u=!1,s=1;s<l.length;++s)if(h=l[s],!e.isWalkableAt(h[0],h[1])){u=!0;break}u&&(p=t[r-1],o.push(p),i=p[0],n=p[1])}return o.push([g,b]),o},i.compressPath=function(e){if(e.length<3)return e;var t,i,n,o,r,s,a=[],l=e[0][0],h=e[0][1],u=e[1][0],p=e[1][1],c=u-l,f=p-h;for(c/=r=Math.sqrt(c*c+f*f),f/=r,a.push([l,h]),s=2;s<e.length;s++)t=u,i=p,n=c,o=f,c=(u=e[s][0])-t,f=(p=e[s][1])-i,f/=r=Math.sqrt(c*c+f*f),(c/=r)===n&&f===o||a.push([t,i]);return a.push([u,p]),a}},{}],8:[function(e,t,i){t.exports={Heap:e("heap"),Node:e("./core/Node"),Grid:e("./core/Grid"),Util:e("./core/Util"),DiagonalMovement:e("./core/DiagonalMovement"),Heuristic:e("./core/Heuristic"),AStarFinder:e("./finders/AStarFinder"),BestFirstFinder:e("./finders/BestFirstFinder"),BreadthFirstFinder:e("./finders/BreadthFirstFinder"),DijkstraFinder:e("./finders/DijkstraFinder"),BiAStarFinder:e("./finders/BiAStarFinder"),BiBestFirstFinder:e("./finders/BiBestFirstFinder"),BiBreadthFirstFinder:e("./finders/BiBreadthFirstFinder"),BiDijkstraFinder:e("./finders/BiDijkstraFinder"),IDAStarFinder:e("./finders/IDAStarFinder"),JumpPointFinder:e("./finders/JumpPointFinder")}},{"./core/DiagonalMovement":3,"./core/Grid":4,"./core/Heuristic":5,"./core/Node":6,"./core/Util":7,"./finders/AStarFinder":9,"./finders/BestFirstFinder":10,"./finders/BiAStarFinder":11,"./finders/BiBestFirstFinder":12,"./finders/BiBreadthFirstFinder":13,"./finders/BiDijkstraFinder":14,"./finders/BreadthFirstFinder":15,"./finders/DijkstraFinder":16,"./finders/IDAStarFinder":17,"./finders/JumpPointFinder":22,heap:1}],9:[function(e,t,i){var k=e("heap"),M=e("../core/Util"),n=e("../core/Heuristic"),o=e("../core/DiagonalMovement");function r(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.heuristic=e.heuristic||n.manhattan,this.weight=e.weight||1,this.diagonalMovement=e.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=o.OnlyWhenNoObstacles:this.diagonalMovement=o.IfAtMostOneObstacle:this.diagonalMovement=o.Never),this.diagonalMovement===o.Never?this.heuristic=e.heuristic||n.manhattan:this.heuristic=e.heuristic||n.octile}r.prototype.findPath=function(e,t,i,n,o){var r,s,a,l,h,u,p,c,f=new k(function(e,t){return e.f-t.f}),d=o.getNodeAt(e,t),g=o.getNodeAt(i,n),b=this.heuristic,v=this.diagonalMovement,m=this.weight,A=Math.abs,y=Math.SQRT2;for(d.g=0,d.f=0,f.push(d),d.opened=!0;!f.empty();){if((r=f.pop()).closed=!0,r===g)return M.backtrace(g);for(l=0,h=(s=o.getNeighbors(r,v)).length;l<h;++l)(a=s[l]).closed||(u=a.x,p=a.y,c=r.g+(u-r.x==0||p-r.y==0?1:y),(!a.opened||c<a.g)&&(a.g=c,a.h=a.h||m*b(A(u-i),A(p-n)),a.f=a.g+a.h,a.parent=r,a.opened?f.updateItem(a):(f.push(a),a.opened=!0)))}return[]},t.exports=r},{"../core/DiagonalMovement":3,"../core/Heuristic":5,"../core/Util":7,heap:1}],10:[function(e,t,i){var n=e("./AStarFinder");function o(e){n.call(this,e);var i=this.heuristic;this.heuristic=function(e,t){return 1e6*i(e,t)}}(o.prototype=new n).constructor=o,t.exports=o},{"./AStarFinder":9}],11:[function(e,t,i){var W=e("heap"),w=e("../core/Util"),n=e("../core/Heuristic"),o=e("../core/DiagonalMovement");function r(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.heuristic=e.heuristic||n.manhattan,this.weight=e.weight||1,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=o.OnlyWhenNoObstacles:this.diagonalMovement=o.IfAtMostOneObstacle:this.diagonalMovement=o.Never),this.diagonalMovement===o.Never?this.heuristic=e.heuristic||n.manhattan:this.heuristic=e.heuristic||n.octile}r.prototype.findPath=function(e,t,i,n,o){var r,s,a,l,h,u,p,c,f=function(e,t){return e.f-t.f},d=new W(f),g=new W(f),b=o.getNodeAt(e,t),v=o.getNodeAt(i,n),m=this.heuristic,A=this.diagonalMovement,y=this.weight,k=Math.abs,M=Math.SQRT2;for(b.g=0,b.f=0,d.push(b),b.opened=1,v.g=0,v.f=0,g.push(v),v.opened=2;!d.empty()&&!g.empty();){for((r=d.pop()).closed=!0,l=0,h=(s=o.getNeighbors(r,A)).length;l<h;++l)if(!(a=s[l]).closed){if(2===a.opened)return w.biBacktrace(r,a);u=a.x,p=a.y,c=r.g+(u-r.x==0||p-r.y==0?1:M),(!a.opened||c<a.g)&&(a.g=c,a.h=a.h||y*m(k(u-i),k(p-n)),a.f=a.g+a.h,a.parent=r,a.opened?d.updateItem(a):(d.push(a),a.opened=1))}for((r=g.pop()).closed=!0,l=0,h=(s=o.getNeighbors(r,A)).length;l<h;++l)if(!(a=s[l]).closed){if(1===a.opened)return w.biBacktrace(a,r);u=a.x,p=a.y,c=r.g+(u-r.x==0||p-r.y==0?1:M),(!a.opened||c<a.g)&&(a.g=c,a.h=a.h||y*m(k(u-e),k(p-t)),a.f=a.g+a.h,a.parent=r,a.opened?g.updateItem(a):(g.push(a),a.opened=2))}}return[]},t.exports=r},{"../core/DiagonalMovement":3,"../core/Heuristic":5,"../core/Util":7,heap:1}],12:[function(e,t,i){var n=e("./BiAStarFinder");function o(e){n.call(this,e);var i=this.heuristic;this.heuristic=function(e,t){return 1e6*i(e,t)}}(o.prototype=new n).constructor=o,t.exports=o},{"./BiAStarFinder":11}],13:[function(e,t,i){var g=e("../core/Util"),n=e("../core/DiagonalMovement");function o(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=n.OnlyWhenNoObstacles:this.diagonalMovement=n.IfAtMostOneObstacle:this.diagonalMovement=n.Never)}o.prototype.findPath=function(e,t,i,n,o){var r,s,a,l,h,u=o.getNodeAt(e,t),p=o.getNodeAt(i,n),c=[],f=[],d=this.diagonalMovement;for(c.push(u),u.opened=!0,u.by=0,f.push(p),p.opened=!0,p.by=1;c.length&&f.length;){for((a=c.shift()).closed=!0,l=0,h=(r=o.getNeighbors(a,d)).length;l<h;++l)if(!(s=r[l]).closed)if(s.opened){if(1===s.by)return g.biBacktrace(a,s)}else c.push(s),s.parent=a,s.opened=!0,s.by=0;for((a=f.shift()).closed=!0,l=0,h=(r=o.getNeighbors(a,d)).length;l<h;++l)if(!(s=r[l]).closed)if(s.opened){if(0===s.by)return g.biBacktrace(s,a)}else f.push(s),s.parent=a,s.opened=!0,s.by=1}return[]},t.exports=o},{"../core/DiagonalMovement":3,"../core/Util":7}],14:[function(e,t,i){var n=e("./BiAStarFinder");function o(e){n.call(this,e),this.heuristic=function(e,t){return 0}}(o.prototype=new n).constructor=o,t.exports=o},{"./BiAStarFinder":11}],15:[function(e,t,i){var d=e("../core/Util"),n=e("../core/DiagonalMovement");function o(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=n.OnlyWhenNoObstacles:this.diagonalMovement=n.IfAtMostOneObstacle:this.diagonalMovement=n.Never)}o.prototype.findPath=function(e,t,i,n,o){var r,s,a,l,h,u=[],p=this.diagonalMovement,c=o.getNodeAt(e,t),f=o.getNodeAt(i,n);for(u.push(c),c.opened=!0;u.length;){if((a=u.shift()).closed=!0,a===f)return d.backtrace(f);for(l=0,h=(r=o.getNeighbors(a,p)).length;l<h;++l)(s=r[l]).closed||s.opened||(u.push(s),s.opened=!0,s.parent=a)}return[]},t.exports=o},{"../core/DiagonalMovement":3,"../core/Util":7}],16:[function(e,t,i){var n=e("./AStarFinder");function o(e){n.call(this,e),this.heuristic=function(e,t){return 0}}(o.prototype=new n).constructor=o,t.exports=o},{"./AStarFinder":9}],17:[function(e,t,i){e("../core/Util");var n=e("../core/Heuristic"),m=e("../core/Node"),o=e("../core/DiagonalMovement");function r(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.heuristic=e.heuristic||n.manhattan,this.weight=e.weight||1,this.trackRecursion=e.trackRecursion||!1,this.timeLimit=e.timeLimit||1/0,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=o.OnlyWhenNoObstacles:this.diagonalMovement=o.IfAtMostOneObstacle:this.diagonalMovement=o.Never),this.diagonalMovement===o.Never?this.heuristic=e.heuristic||n.manhattan:this.heuristic=e.heuristic||n.octile}r.prototype.findPath=function(e,t,i,n,f){var o,r,s,d=(new Date).getTime(),g=function(e,t){return this.heuristic(Math.abs(t.x-e.x),Math.abs(t.y-e.y))}.bind(this),b=function(e,t,i,n,o){if(0,0<this.timeLimit&&(new Date).getTime()-d>1e3*this.timeLimit)return 1/0;var r,s,a,l,h=t+g(e,v)*this.weight;if(i<h)return h;if(e==v)return n[o]=[e.x,e.y],e;var u,p,c=f.getNeighbors(e,this.diagonalMovement);for(r=1/(a=0);l=c[a];++a){if(this.trackRecursion&&(l.retainCount=l.retainCount+1||1,!0!==l.tested&&(l.tested=!0)),(s=b(l,t+(p=l,(u=e).x===p.x||u.y===p.y?1:Math.SQRT2),i,n,o+1))instanceof m)return n[o]=[e.x,e.y],s;this.trackRecursion&&0==--l.retainCount&&(l.tested=!1),s<r&&(r=s)}return r}.bind(this),a=f.getNodeAt(e,t),v=f.getNodeAt(i,n),l=g(a,v);for(o=0;;++o){if((s=b(a,0,l,r=[],0))===1/0)return[];if(s instanceof m)return r;l=s}return[]},t.exports=r},{"../core/DiagonalMovement":3,"../core/Heuristic":5,"../core/Node":6,"../core/Util":7}],18:[function(e,t,i){var n=e("./JumpPointFinderBase"),d=e("../core/DiagonalMovement");function o(e){n.call(this,e)}((o.prototype=new n).constructor=o).prototype._jump=function(e,t,i,n){var o=this.grid,r=e-i,s=t-n;if(!o.isWalkableAt(e,t))return null;if(!0===this.trackJumpRecursion&&(o.getNodeAt(e,t).tested=!0),o.getNodeAt(e,t)===this.endNode)return[e,t];if(0!==r&&0!==s){if(o.isWalkableAt(e-r,t+s)&&!o.isWalkableAt(e-r,t)||o.isWalkableAt(e+r,t-s)&&!o.isWalkableAt(e,t-s))return[e,t];if(this._jump(e+r,t,e,t)||this._jump(e,t+s,e,t))return[e,t]}else if(0!==r){if(o.isWalkableAt(e+r,t+1)&&!o.isWalkableAt(e,t+1)||o.isWalkableAt(e+r,t-1)&&!o.isWalkableAt(e,t-1))return[e,t]}else if(o.isWalkableAt(e+1,t+s)&&!o.isWalkableAt(e+1,t)||o.isWalkableAt(e-1,t+s)&&!o.isWalkableAt(e-1,t))return[e,t];return this._jump(e+r,t+s,e,t)},o.prototype._findNeighbors=function(e){var t,i,n,o,r,s,a,l,h=e.parent,u=e.x,p=e.y,c=this.grid,f=[];if(h)t=h.x,i=h.y,n=(u-t)/Math.max(Math.abs(u-t),1),o=(p-i)/Math.max(Math.abs(p-i),1),0!==n&&0!==o?(c.isWalkableAt(u,p+o)&&f.push([u,p+o]),c.isWalkableAt(u+n,p)&&f.push([u+n,p]),c.isWalkableAt(u+n,p+o)&&f.push([u+n,p+o]),c.isWalkableAt(u-n,p)||f.push([u-n,p+o]),c.isWalkableAt(u,p-o)||f.push([u+n,p-o])):0===n?(c.isWalkableAt(u,p+o)&&f.push([u,p+o]),c.isWalkableAt(u+1,p)||f.push([u+1,p+o]),c.isWalkableAt(u-1,p)||f.push([u-1,p+o])):(c.isWalkableAt(u+n,p)&&f.push([u+n,p]),c.isWalkableAt(u,p+1)||f.push([u+n,p+1]),c.isWalkableAt(u,p-1)||f.push([u+n,p-1]));else for(a=0,l=(r=c.getNeighbors(e,d.Always)).length;a<l;++a)s=r[a],f.push([s.x,s.y]);return f},t.exports=o},{"../core/DiagonalMovement":3,"./JumpPointFinderBase":23}],19:[function(e,t,i){var n=e("./JumpPointFinderBase"),d=e("../core/DiagonalMovement");function o(e){n.call(this,e)}((o.prototype=new n).constructor=o).prototype._jump=function(e,t,i,n){var o=this.grid,r=e-i,s=t-n;if(!o.isWalkableAt(e,t))return null;if(!0===this.trackJumpRecursion&&(o.getNodeAt(e,t).tested=!0),o.getNodeAt(e,t)===this.endNode)return[e,t];if(0!==r&&0!==s){if(o.isWalkableAt(e-r,t+s)&&!o.isWalkableAt(e-r,t)||o.isWalkableAt(e+r,t-s)&&!o.isWalkableAt(e,t-s))return[e,t];if(this._jump(e+r,t,e,t)||this._jump(e,t+s,e,t))return[e,t]}else if(0!==r){if(o.isWalkableAt(e+r,t+1)&&!o.isWalkableAt(e,t+1)||o.isWalkableAt(e+r,t-1)&&!o.isWalkableAt(e,t-1))return[e,t]}else if(o.isWalkableAt(e+1,t+s)&&!o.isWalkableAt(e+1,t)||o.isWalkableAt(e-1,t+s)&&!o.isWalkableAt(e-1,t))return[e,t];return o.isWalkableAt(e+r,t)||o.isWalkableAt(e,t+s)?this._jump(e+r,t+s,e,t):null},o.prototype._findNeighbors=function(e){var t,i,n,o,r,s,a,l,h=e.parent,u=e.x,p=e.y,c=this.grid,f=[];if(h)t=h.x,i=h.y,n=(u-t)/Math.max(Math.abs(u-t),1),o=(p-i)/Math.max(Math.abs(p-i),1),0!==n&&0!==o?(c.isWalkableAt(u,p+o)&&f.push([u,p+o]),c.isWalkableAt(u+n,p)&&f.push([u+n,p]),(c.isWalkableAt(u,p+o)||c.isWalkableAt(u+n,p))&&f.push([u+n,p+o]),!c.isWalkableAt(u-n,p)&&c.isWalkableAt(u,p+o)&&f.push([u-n,p+o]),!c.isWalkableAt(u,p-o)&&c.isWalkableAt(u+n,p)&&f.push([u+n,p-o])):0===n?c.isWalkableAt(u,p+o)&&(f.push([u,p+o]),c.isWalkableAt(u+1,p)||f.push([u+1,p+o]),c.isWalkableAt(u-1,p)||f.push([u-1,p+o])):c.isWalkableAt(u+n,p)&&(f.push([u+n,p]),c.isWalkableAt(u,p+1)||f.push([u+n,p+1]),c.isWalkableAt(u,p-1)||f.push([u+n,p-1]));else for(a=0,l=(r=c.getNeighbors(e,d.IfAtMostOneObstacle)).length;a<l;++a)s=r[a],f.push([s.x,s.y]);return f},t.exports=o},{"../core/DiagonalMovement":3,"./JumpPointFinderBase":23}],20:[function(e,t,i){var n=e("./JumpPointFinderBase"),A=e("../core/DiagonalMovement");function o(e){n.call(this,e)}((o.prototype=new n).constructor=o).prototype._jump=function(e,t,i,n){var o=this.grid,r=e-i,s=t-n;if(!o.isWalkableAt(e,t))return null;if(!0===this.trackJumpRecursion&&(o.getNodeAt(e,t).tested=!0),o.getNodeAt(e,t)===this.endNode)return[e,t];if(0!==r&&0!==s){if(this._jump(e+r,t,e,t)||this._jump(e,t+s,e,t))return[e,t]}else if(0!==r){if(o.isWalkableAt(e,t-1)&&!o.isWalkableAt(e-r,t-1)||o.isWalkableAt(e,t+1)&&!o.isWalkableAt(e-r,t+1))return[e,t]}else if(0!==s&&(o.isWalkableAt(e-1,t)&&!o.isWalkableAt(e-1,t-s)||o.isWalkableAt(e+1,t)&&!o.isWalkableAt(e+1,t-s)))return[e,t];return o.isWalkableAt(e+r,t)&&o.isWalkableAt(e,t+s)?this._jump(e+r,t+s,e,t):null},o.prototype._findNeighbors=function(e){var t,i,n,o,r,s,a,l,h=e.parent,u=e.x,p=e.y,c=this.grid,f=[];if(h){if(t=h.x,i=h.y,n=(u-t)/Math.max(Math.abs(u-t),1),o=(p-i)/Math.max(Math.abs(p-i),1),0!==n&&0!==o)c.isWalkableAt(u,p+o)&&f.push([u,p+o]),c.isWalkableAt(u+n,p)&&f.push([u+n,p]),c.isWalkableAt(u,p+o)&&c.isWalkableAt(u+n,p)&&f.push([u+n,p+o]);else if(0!==n){var d=c.isWalkableAt(u+n,p),g=c.isWalkableAt(u,p+1),b=c.isWalkableAt(u,p-1);d&&(f.push([u+n,p]),g&&f.push([u+n,p+1]),b&&f.push([u+n,p-1])),g&&f.push([u,p+1]),b&&f.push([u,p-1])}else if(0!==o){d=c.isWalkableAt(u,p+o);var v=c.isWalkableAt(u+1,p),m=c.isWalkableAt(u-1,p);d&&(f.push([u,p+o]),v&&f.push([u+1,p+o]),m&&f.push([u-1,p+o])),v&&f.push([u+1,p]),m&&f.push([u-1,p])}}else for(a=0,l=(r=c.getNeighbors(e,A.OnlyWhenNoObstacles)).length;a<l;++a)s=r[a],f.push([s.x,s.y]);return f},t.exports=o},{"../core/DiagonalMovement":3,"./JumpPointFinderBase":23}],21:[function(e,t,i){var n=e("./JumpPointFinderBase"),d=e("../core/DiagonalMovement");function o(e){n.call(this,e)}((o.prototype=new n).constructor=o).prototype._jump=function(e,t,i,n){var o=this.grid,r=e-i,s=t-n;if(!o.isWalkableAt(e,t))return null;if(!0===this.trackJumpRecursion&&(o.getNodeAt(e,t).tested=!0),o.getNodeAt(e,t)===this.endNode)return[e,t];if(0!==r){if(o.isWalkableAt(e,t-1)&&!o.isWalkableAt(e-r,t-1)||o.isWalkableAt(e,t+1)&&!o.isWalkableAt(e-r,t+1))return[e,t]}else{if(0===s)throw new Error("Only horizontal and vertical movements are allowed");if(o.isWalkableAt(e-1,t)&&!o.isWalkableAt(e-1,t-s)||o.isWalkableAt(e+1,t)&&!o.isWalkableAt(e+1,t-s))return[e,t];if(this._jump(e+1,t,e,t)||this._jump(e-1,t,e,t))return[e,t]}return this._jump(e+r,t+s,e,t)},o.prototype._findNeighbors=function(e){var t,i,n,o,r,s,a,l,h=e.parent,u=e.x,p=e.y,c=this.grid,f=[];if(h)t=h.x,i=h.y,n=(u-t)/Math.max(Math.abs(u-t),1),o=(p-i)/Math.max(Math.abs(p-i),1),0!==n?(c.isWalkableAt(u,p-1)&&f.push([u,p-1]),c.isWalkableAt(u,p+1)&&f.push([u,p+1]),c.isWalkableAt(u+n,p)&&f.push([u+n,p])):0!==o&&(c.isWalkableAt(u-1,p)&&f.push([u-1,p]),c.isWalkableAt(u+1,p)&&f.push([u+1,p]),c.isWalkableAt(u,p+o)&&f.push([u,p+o]));else for(a=0,l=(r=c.getNeighbors(e,d.Never)).length;a<l;++a)s=r[a],f.push([s.x,s.y]);return f},t.exports=o},{"../core/DiagonalMovement":3,"./JumpPointFinderBase":23}],22:[function(e,t,i){var n=e("../core/DiagonalMovement"),o=e("./JPFNeverMoveDiagonally"),r=e("./JPFAlwaysMoveDiagonally"),s=e("./JPFMoveDiagonallyIfNoObstacles"),a=e("./JPFMoveDiagonallyIfAtMostOneObstacle");t.exports=function(e){return(e=e||{}).diagonalMovement===n.Never?new o(e):e.diagonalMovement===n.Always?new r(e):e.diagonalMovement===n.OnlyWhenNoObstacles?new s(e):new a(e)}},{"../core/DiagonalMovement":3,"./JPFAlwaysMoveDiagonally":18,"./JPFMoveDiagonallyIfAtMostOneObstacle":19,"./JPFMoveDiagonallyIfNoObstacles":20,"./JPFNeverMoveDiagonally":21}],23:[function(e,t,i){var h=e("heap"),u=e("../core/Util"),A=e("../core/Heuristic");e("../core/DiagonalMovement");function n(e){e=e||{},this.heuristic=e.heuristic||A.manhattan,this.trackJumpRecursion=e.trackJumpRecursion||!1}n.prototype.findPath=function(e,t,i,n,o){var r,s=this.openList=new h(function(e,t){return e.f-t.f}),a=this.startNode=o.getNodeAt(e,t),l=this.endNode=o.getNodeAt(i,n);for(this.grid=o,a.g=0,a.f=0,s.push(a),a.opened=!0;!s.empty();){if((r=s.pop()).closed=!0,r===l)return u.expandPath(u.backtrace(l));this._identifySuccessors(r)}return[]},n.prototype._identifySuccessors=function(e){var t,i,n,o,r,s,a,l,h,u,p=this.grid,c=this.heuristic,f=this.openList,d=this.endNode.x,g=this.endNode.y,b=e.x,v=e.y,m=Math.abs;Math.max;for(o=0,r=(t=this._findNeighbors(e)).length;o<r;++o)if(i=t[o],n=this._jump(i[0],i[1],b,v)){if(s=n[0],a=n[1],(u=p.getNodeAt(s,a)).closed)continue;l=A.octile(m(s-b),m(a-v)),h=e.g+l,(!u.opened||h<u.g)&&(u.g=h,u.h=u.h||c(m(s-d),m(a-g)),u.f=u.g+u.h,u.parent=e,u.opened?f.updateItem(u):(f.push(u),u.opened=!0))}},t.exports=n},{"../core/DiagonalMovement":3,"../core/Heuristic":5,"../core/Util":7,heap:1}]},{},[8])(8)}),function(e){var t;(t=e.DiagonalMovement||(e.DiagonalMovement={}))[t.Always=0]="Always",t[t.Never=1]="Never",t[t.IfAtMostOneObstacle=2]="IfAtMostOneObstacle",t[t.OnlyWhenNoObstacles=3]="OnlyWhenNoObstacles";e.DiagonalMovement}(PF||(PF={})),function(e){var t=function(){this.allowDiagonal=!0,this.dontCrossCorners=!0,this.heuristic=null,this.weight=1,this.diagonalMovement=0,this.timeLimit=10,this.trackRecursion=!0};(PF||(PF={})).Option=t}(),window.PF=PF;