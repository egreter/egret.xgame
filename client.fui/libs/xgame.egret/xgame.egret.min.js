window.egretx={};var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n};window.__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();var __awaiter=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,s)}c((i=i.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},__decorate=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};!function(e){var t;xgame.XGame.prototype.useEgret=function(t){this.registerServiceProvider(new e.EgretProvider(t))},function(e){e[e.INVALID=0]="INVALID",e[e.H_HEAD=1]="H_HEAD",e[e.H_MID=2]="H_MID",e[e.H_TAIL=4]="H_TAIL",e[e.V_HEAD=8]="V_HEAD",e[e.V_MID=16]="V_MID",e[e.V_TAIL=32]="V_TAIL"}(t=e.SBState||(e.SBState={})),eui.Group.prototype.onResizeChanged=function(){var e=this.__callback_onResize__;return e||(e=new xgame.Signal0,this.__callback_onResize__=e),e};var n=eui.Group.prototype.setContentSize;eui.Group.prototype.setContentSize=function(e,t){n.call(this,e,t);this.__callback_onResize__&&this.__callback_onResize__.dispatch()},eui.Group.prototype.__onHScrollChanged__=function(){var e=this.scrollV,n=this.contentHeight-this.height;n>0?e<5?this.__callback_onHS__.dispatch(t.H_HEAD):e>=5&&e<=n-5?this.__callback_onHS__.dispatch(t.H_MID):e>n-5&&this.__callback_onHS__.dispatch(t.H_TAIL):this.__callback_onHS__.dispatch(t.INVALID)},eui.Group.prototype.onHS=function(){return this.__callback_onHS__||(this.__callback_onHS__=new xgame.Signal1,this.__h_1_wacther__=eui.Binding.bindHandler(this,["contentWidth"],this.__onHScrollChanged__,this),this.__h_2_wacther__=eui.Binding.bindHandler(this,["scrollH"],this.__onHScrollChanged__,this)),this.__callback_onHS__},eui.Group.prototype.__onVScrollChanged__=function(){var e=this.scrollV,n=this.contentHeight-this.height;n>0?e<5?this.__callback_onVS__.dispatch(t.V_HEAD):e>=5&&e<=n-5?this.__callback_onVS__.dispatch(t.V_MID):e>n-5&&this.__callback_onVS__.dispatch(t.V_TAIL):this.__callback_onVS__.dispatch(t.INVALID)},eui.Group.prototype.onVS=function(){return this.__callback_onVS__||(this.__callback_onVS__=new xgame.Signal1,this.__v_1_wacther__=eui.Binding.bindHandler(this,["contentHeight"],this.__onVScrollChanged__,this),this.__v_2_wacther__=eui.Binding.bindHandler(this,["scrollV"],this.__onVScrollChanged__,this)),this.__callback_onVS__};var i=eui.Group.prototype.$onRemoveFromStage;eui.Group.prototype.$onRemoveFromStage=function(){i.apply(this);this.__callback_onResize__&&this.__callback_onResize__.removeAll(),this.__callback_onHS__&&(this.__callback_onHS__.removeAll(),this.__h_1_wacther__.unwatch(),this.__h_2_wacther__.unwatch(),this.__callback_onHS__=void 0,this.__h_1_wacther__=void 0,this.__h_2_wacther__=void 0),this.__callback_onVS__&&(this.__callback_onVS__.removeAll(),this.__v_1_wacther__.unwatch(),this.__v_2_wacther__.unwatch(),this.__callback_onVS__=void 0,this.__v_1_wacther__=void 0,this.__v_2_wacther__=void 0)},eui.DataGroup.prototype.getScroller=function(){if(this.parent&&egret.is(this.parent,"eui.Scroller"))return this.parent},eui.DataGroup.prototype.setItemWidth=function(e){this.__itemWidth__=e},eui.DataGroup.prototype.setItemHeight=function(e){this.__itemHeight__=e},eui.DataGroup.prototype.scrollToIndex=function(e){var t=this.getScroller();if(t){var n=0,i=0,r=0;egret.is(this.layout,"eui.LinearLayoutBase")&&(i=this.layout.gap),this.__itemWidth__?((r=this.contentWidth-t.width)<0&&(r=0),n=this.__itemWidth__,n+=i,(n*=e)>r&&(n=r),this.scrollH=n):this.__itemHeight__&&((r=this.contentHeight-t.height)<0&&(r=0),n=this.__itemHeight__,n+=i,(n*=e)>r&&(n=r),this.scrollV=n)}},eui.DataGroup.prototype.replaceAll=function(e,t){var n=this,i=0;"number"==typeof t&&(i=t,n.onResizeChanged().addOnce(function(){n.scrollToIndex(i)},this));var r=n.__dataSource__;null==r||"boolean"==typeof t&&t?(r=new eui.ArrayCollection(e),n.__dataSource__=r,n.dataProvider=r):r.replaceAll(e)}}(egretx||(egretx={})),function(e){var t=function(t){function n(e){var n=t.call(this)||this;return n.main=e,n.priority=100,n}return __extends(n,t),n.prototype.onInit=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,!0]})})},n.prototype.onStart=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){return t.getService(e.IDragonBonesManagerInternal).initialize(),t.getService(e.IAnimationManagerInternal).initialize(),t.getService(e.IAudioManagerInternal).initialize(),t.getService(e.IResourceManagerInternal).initialize(),t.getService(e.IHttpManagerInternal).initialize(),t.getService(e.ISocketManagerInternal).initialize(),t.getService(e.IGuideManagerInternal).initialize(),[2,!0]})})},n.prototype.onServiceRegister=function(t){t.singleton(e.IDragonBonesManager,e.DragonBonesManager).withInstance(e.DragonBonesManager.Instance()).setAlias(e.IDragonBonesManagerInternal),console.log("[EgretProvider]: 注册管理器{0}".format(xgame.getQualifiedClassName(e.DragonBonesManager))),t.singleton(e.IAnimationManager,e.AnimationManager).withInstance(e.AnimationManager.Instance()).setAlias(e.IAnimationManagerInternal),console.log("[EgretProvider]: 注册管理器{0}".format(xgame.getQualifiedClassName(e.AnimationManager))),t.singleton(e.IAudioManager,e.AudioManager).withInstance(e.AudioManager.Instance()).setAlias(e.IAudioManagerInternal),console.log("[EgretProvider]: 注册管理器{0}".format(xgame.getQualifiedClassName(e.AudioManager))),t.singleton(e.IResourceManager,e.ResourceManager).withInstance(e.ResourceManager.Instance()).setAlias(e.IResourceManagerInternal),console.log("[EgretProvider]: 注册管理器{0}".format(xgame.getQualifiedClassName(e.ResourceManager))),t.singleton(e.IHttpManager,e.HttpManager).withInstance(e.HttpManager.Instance()).setAlias(e.IHttpManagerInternal),console.log("[EgretProvider]: 注册管理器{0}".format(xgame.getQualifiedClassName(e.HttpManager))),t.singleton(e.ISocketManager,e.SocketManager).withInstance(e.SocketManager.Instance()).setAlias(e.ISocketManagerInternal),console.log("[EgretProvider]: 注册管理器{0}".format(xgame.getQualifiedClassName(e.SocketManager))),t.singleton(e.IGuideManager,e.GuideManager).withInstance(e.GuideManager.Instance()).setAlias(e.IGuideManagerInternal),console.log("[EgretProvider]: 注册管理器{0}".format(xgame.getQualifiedClassName(e.GuideManager)))},n}(xgame.XObject);e.EgretProvider=t,__reflect(t.prototype,"egretx.EgretProvider",["xgame.IServiceProvider"])}(egretx||(egretx={})),function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.playingClips=new xgame.Dictionary,e.pools=new xgame.PoolGroup("AnimationClip"),e.factories=new xgame.Dictionary,e}return __extends(n,t),n.prototype.initialize=function(){},n.prototype.fetch=function(t,n){var i="{0}:{1}".format(t,n=n||t),r=this.pools.fetch(i,e.AnimationClip,function(){return new e.AnimationClip(t,n)},this);return this.playingClips.add(r.hashCode,r),r},n.prototype.recycle=function(t){this.playingClips.remove(t.hashCode);var n="{0}:{1}".format(t.key,t.movieClipname);this.pools.recycle(n,e.AnimationClip,t)},n.prototype.release=function(e){var t=this;this.pools.pools.forKeys(function(n){n.split(":")[0]==e&&t._release(n)},this,!0)},n.prototype._release=function(t){if(this.pools.getPool(t,e.AnimationClip).expired){this.pools.release(t,e.AnimationClip);var n=t.split(":")[0];this.factories.containsKey(n)&&(this.factories.remove(n),console.log("AnimationManager.clearMovieClipDataFactory({0})".format(n))),e.ResourceManager.Instance().getOrCreateGroup(e.ResourceType.MovieClip).release(n)}},n.prototype.releases=function(){var e=this;this.pools.pools.forKeys(function(t){e._release(t)},this,!0)},n.prototype.getRes=function(e){var t={};return t.json=e+"_json",t.texture=e+"_png",t},n.prototype.generateMovieClipData=function(e,t){t=t||e;var n=this.getRes(e);if(!RES.hasRes(n.json)||!RES.hasRes(n.texture))return console.warn("动画{0}的资源没有加载".format(e)),null;var i=this.factories.get(e);return i||(i=new egret.MovieClipDataFactory(RES.getRes(n.json),RES.getRes(n.texture)),this.factories.add(e,i)),t=t||e,i.generateMovieClipData(t)},n}(xgame.Singleton);e.AnimationManager=t,__reflect(t.prototype,"egretx.AnimationManager",["egretx.IAnimationManager","xgame.IXObject","egretx.IAnimationManagerInternal"])}(egretx||(egretx={})),function(e){var t=function(t){function n(e,n,i){void 0===i&&(i="mc");var r=t.call(this)||this;return r.frameActions=[],r.$timeline=xgame.Timeline.MAIN,r.fromPoolHashCode=0,r.$timeScale=1,r.$scale=1,r.$mc_scaleX=1,r.$mc_scaleY=1,r.callback_preload=new xgame.Signal0,r.$playTimes=0,n=n||e,r.name="{0}:{1}".format(e,n),r.key=e,r.movieClipname=n,r.actionName=i,r.touchChildren=!1,r.touchEnabled=!1,r}return __extends(n,t),Object.defineProperty(n.prototype,"mc",{get:function(){return this.$mc},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"timeline",{get:function(){return this.$timeline},enumerable:!0,configurable:!0}),n.prototype.setTimeline=function(e){this.$timeline=e},n.prototype.release=function(){this.dispose(),this.data=void 0,this.$mc=void 0,this.frameActions.length=0},n.prototype.dispose=function(){this.removeSelf()},Object.defineProperty(n.prototype,"frameRate",{get:function(){return this.$frameRate},set:function(e){this.$frameRate=e,this.mc&&(this.mc.frameRate=this.frameRate)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"timeScale",{get:function(){return this.$timeScale},set:function(e){this.$timeScale=e,this.$mc&&(this.$mc.timeScale=e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scale",{get:function(){return this.$scale},set:function(e){this.$scale=e,this.mc_scaleX=e,this.mc_scaleY=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"mc_scaleX",{get:function(){return this.$mc_scaleX},set:function(e){this.$mc_scaleX=e,this.$mc&&(this.$mc.scaleX=this.$mc_scaleX)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"mc_scaleY",{get:function(){return this.$mc_scaleY},set:function(e){this.$mc_scaleY=e,this.$mc&&(this.$mc.scaleY=this.$mc_scaleY)},enumerable:!0,configurable:!0}),n.prototype.addFrameAction=function(t,n,i){this.$mc?((isNaN(i)||0==i)&&(i=this.data.numFrames),this.$mc.addFrameAction(i,t,n)):this.frameActions.push(new e.FrameActionItem(t,n,i))},n.prototype.removeFrameActions=function(e){this.$mc&&((isNaN(e)||0==e)&&(e=this.data.numFrames),this.$mc.removeFrameActions(e))},n.prototype.preload=function(){var e=this;return this.$mc?this.callback_preload.dispatch():this.loadMC(!0).then(function(){e.callback_preload.dispatch()}),this.callback_preload},n.prototype.playWithAutoRemove=function(t){var n=this;this.addFrameAction(function(){e.AnimationManager.Instance().recycle(n)},this),this.play(1,t)},n.prototype.play=function(e,t){null!=t&&(this.actionName=t),isNaN(e)?this.$playTimes=0:this.$playTimes=e,this.mc?this._play():this.data?this.initMC(this.data):this.loadMC()},n.prototype.loadMC=function(t){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(i){switch(i.label){case 0:return e.ResourceManager.Instance().getOrCreateGroup(e.ResourceType.MovieClip).load(this.key),n=e.AnimationManager.Instance().getRes(this.key),[4,e.ResourceManager.Instance().loadResAsync(n.json)];case 1:return i.sent(),[4,e.ResourceManager.Instance().loadResAsync(n.texture)];case 2:return i.sent(),this.data=e.AnimationManager.Instance().generateMovieClipData(this.key,this.movieClipname),this.initMC(this.data,t),[2]}})})},n.prototype.onFrameLabelEvent=function(e){this.dispatchEvent(e)},n.prototype.onLoopCompleteEvent=function(e){this.dispatchEvent(e)},n.prototype.onCompleteEvent=function(e){this.dispatchEvent(e)},n.prototype.initMC=function(t,n){var i=e.AnimationManager.Instance().getRes(this.key);if(RES.getRes(i.json)){for(var r=0,o=this.frameActions;r<o.length;r++){var a=o[r];-1==a.frame&&(a.frame=t.numFrames)}this.$mc=new e.MovieClip(t,this.frameActions),this.mc.timeScale=this.timeScale,this.mc.setTimeline(this.timeline),this.mc.scaleX=this.mc_scaleX,this.mc.scaleY=this.mc_scaleY,e.MovieClip.DISPATCH_ENABLE&&(this.mc.addEventListener(egret.MovieClipEvent.FRAME_LABEL,this.onFrameLabelEvent,this),this.mc.addEventListener(egret.MovieClipEvent.LOOP_COMPLETE,this.onLoopCompleteEvent,this),this.mc.addEventListener(egret.MovieClipEvent.COMPLETE,this.onCompleteEvent,this)),!isNaN(this.frameRate)&&this.frameRate>0&&(this.mc.frameRate=this.frameRate),this.frameActions.length=0,this.addChild(this.$mc),n||this._play()}},n.prototype._play=function(){this.mc&&(this.actionName?this.mc.gotoAndPlay(this.actionName,this.$playTimes):this.mc.play(this.$playTimes))},n.prototype.stop=function(){this.mc&&this.mc.stop()},n.prototype.reset=function(){this.mc&&this.mc.removeFrameActions()},n.prototype.removeSelf=function(){this.stop(),this.mc&&(this.mc.removeEventListener(egret.MovieClipEvent.FRAME_LABEL,this.onFrameLabelEvent,this),this.mc.removeEventListener(egret.MovieClipEvent.LOOP_COMPLETE,this.onLoopCompleteEvent,this),this.mc.removeEventListener(egret.MovieClipEvent.COMPLETE,this.onCompleteEvent,this)),this.parent&&this.parent.removeChild(this)},n}(eui.Component);e.AnimationClip=t,__reflect(t.prototype,"egretx.AnimationClip",["xgame.IPoolable","xgame.IDisposable","xgame.IXObject"])}(egretx||(egretx={})),function(e){var t=function(){function t(e){this.name="FrameAction",this.frame=e}return Object.defineProperty(t.prototype,"frame",{get:function(){return this.$frame},set:function(e){isNaN(e)?this.$frame=-1:this.$frame=e},enumerable:!0,configurable:!0}),t.prototype.hasAction=function(e,t){if(null==this.$items)return-1;for(var n=0;n<this.$items.length;n++){var i=this.$items[n];if(i.action==e&&i.thisObject==t)return n}return-1},t.prototype.addAction=function(t,n){null==this.$items&&(this.$items=[]),-1==this.hasAction(t,n)&&(this.$items[this.$items.length]=new e.FrameActionItem(t,n,this.frame))},t.prototype.removeAction=function(e,t){if(this.$items){var n=this.hasAction(e,t);n>=0&&this.$items.splice(n,1)}},t.prototype.removeActions=function(){this.$items&&(this.$items.length=0)},t.prototype.executeActions=function(e,t){if(this.$items)for(var n=this.$items.slice(),i=0,r=n.length;i<r;++i){var o=n[i],a=o.action,s=a.length;0==s?a.call(o.thisObject):1==s?a.call(o.thisObject,e):2==s&&a.call(o.thisObject,e,t)}},Object.defineProperty(t.prototype,"numActions",{get:function(){return this.$items?this.$items.length:0},enumerable:!0,configurable:!0}),t}();e.FrameAction=t,__reflect(t.prototype,"egretx.FrameAction")}(egretx||(egretx={})),function(e){var t=function(){return function(e,t,n){this.action=e,this.thisObject=t,isNaN(n)||0==n?this.frame=-1:this.frame=n}}();e.FrameActionItem=t,__reflect(t.prototype,"egretx.FrameActionItem")}(egretx||(egretx={})),function(e){var t=function(t){function n(e,n){var i=t.call(this)||this;return i.$actions=new xgame.Dictionary,i.$timeline=xgame.Timeline.MAIN,i.$texture=null,i.offsetPoint=new egret.Point(0,0),i.$movieClipData=null,i.frames=null,i.$totalFrames=0,i.frameLabels=null,i.$frameLabelStart=0,i.$frameLabelEnd=0,i.frameEvents=null,i.frameIntervalTime=0,i.$eventPool=null,i.$isPlaying=!1,i.isStopped=!0,i.playTimes=0,i.$currentFrameNum=0,i.$nextFrameNum=1,i.displayedKeyFrameNum=0,i.passedTime=0,i.$frameRate=NaN,i.$timeScale=1,i.lastTime=0,i.invokeActions=n,i.$smoothing=egret.Bitmap.defaultSmoothing,i.setMovieClipData(e),egret.nativeRender||(i.$renderNode=new egret.sys.NormalBitmapNode),i}return __extends(n,t),Object.defineProperty(n.prototype,"timeline",{get:function(){return this.$timeline},enumerable:!0,configurable:!0}),n.prototype.setTimeline=function(e){this.$timeline=e},n.prototype.setData=function(e,t){this.setInvokeActions(t),this.setMovieClipData(e,!0)},n.prototype.setInvokeActions=function(e){this.invokeActions=e},Object.defineProperty(n.prototype,"timeScale",{get:function(){return this.$timeScale},set:function(e){this.$timeScale=e},enumerable:!0,configurable:!0}),n.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(11)},Object.defineProperty(n.prototype,"smoothing",{get:function(){return this.$smoothing},set:function(e){e!=this.$smoothing&&(this.$smoothing=e)},enumerable:!0,configurable:!0}),n.prototype.$init=function(){this.$reset();var e=this.$movieClipData;e&&e.$isDataValid()&&(this.frames=e.frames,this.$totalFrames=e.numFrames,this.frameLabels=e.labels,this.frameEvents=e.events,this.$frameRate=e.frameRate,this.frameIntervalTime=1e3/this.$frameRate,this.fillMovieFrames(),this._initFrame())},n.prototype.fillMovieFrames=function(){var t=this.movieClipData.frames.length;if(this.$actions.add(t,new e.FrameAction(t)),this.invokeActions&&this.invokeActions.length>0)for(var n=0,i=this.invokeActions;n<i.length;n++){var r=i[n];-1==r.frame&&(r.frame=this.movieClipData.numFrames);var o=this.getActionAt(r.frame);o&&o.addAction(r.action,r.thisObject)}},n.prototype.$reset=function(){this.frames=null,this.playTimes=0,this.$isPlaying=!1,this.setIsStopped(!0),this.$currentFrameNum=0,this.$nextFrameNum=1,this.displayedKeyFrameNum=0,this.passedTime=0,this.$eventPool=[],this.$actions.clear()},n.prototype._initFrame=function(){this.$movieClipData.$isTextureValid()&&(this.advanceFrame(),this.constructFrame())},n.prototype.$updateRenderNode=function(){var e=this.$texture;if(e){var t=Math.round(this.offsetPoint.x),n=Math.round(this.offsetPoint.y),i=e.$bitmapWidth,r=e.$bitmapHeight,o=e.$getTextureWidth(),a=e.$getTextureHeight(),s=Math.round(e.$getScaleBitmapWidth()),c=Math.round(e.$getScaleBitmapHeight()),u=e.$sourceWidth,h=e.$sourceHeight;egret.sys.BitmapNode.$updateTextureData(this.$renderNode,e.$bitmapData,e.$bitmapX,e.$bitmapY,i,r,t,n,o,a,s,c,u,h,egret.BitmapFillMode.SCALE,this.$smoothing)}},n.prototype.$measureContentBounds=function(e){var t=this.$texture;if(t){var n=this.offsetPoint.x,i=this.offsetPoint.y,r=t.$getTextureWidth(),o=t.$getTextureHeight();e.setTo(n,i,r,o)}else e.setEmpty()},n.prototype.$onAddToStage=function(e,n){t.prototype.$onAddToStage.call(this,e,n),this.$isPlaying&&this.$totalFrames>1&&this.setIsStopped(!1)},n.prototype.$onRemoveFromStage=function(){this.setIsStopped(!0),t.prototype.$onRemoveFromStage.call(this)},n.prototype.getFrameLabelByName=function(e,t){void 0===t&&(t=!1),t&&(e=e.toLowerCase());var n=this.frameLabels;if(n)for(var i=null,r=0;r<n.length;r++)if(i=n[r],t?i.name.toLowerCase()==e:i.name==e)return i;return null},n.prototype.getFrameStartEnd=function(e){var t=this.frameLabels;if(t)for(var n=null,i=0;i<t.length;i++)if(e==(n=t[i]).name){this.$frameLabelStart=n.frame,this.$frameLabelEnd=n.end;break}},n.prototype.getFrameLabelByFrame=function(e){var t=this.frameLabels;if(t)for(var n=null,i=0;i<t.length;i++)if((n=t[i]).frame==e)return n;return null},n.prototype.getFrameLabelForFrame=function(e){var t=null,n=null,i=this.frameLabels;if(i)for(var r=0;r<i.length;r++){if((n=i[r]).frame>e)return t;t=n}return t},n.prototype.play=function(e){void 0===e&&(e=0),this.lastTime=egret.getTimer(),this.passedTime=0,this.$isPlaying=!0,this.setPlayTimes(e),this.$totalFrames>1&&this.$stage&&this.setIsStopped(!1)},n.prototype.stop=function(){this.$isPlaying=!1,this.setIsStopped(!0)},n.prototype.prevFrame=function(){this.gotoAndStop(this.$currentFrameNum-1)},n.prototype.nextFrame=function(){this.gotoAndStop(this.$currentFrameNum+1)},n.prototype.gotoAndPlay=function(e,t){void 0===t&&(t=0),(0==arguments.length||arguments.length>2)&&egret.$error(1022,"MovieClip.gotoAndPlay()"),"string"==typeof e?this.getFrameStartEnd(e):(this.$frameLabelStart=0,this.$frameLabelEnd=0),this.play(t),this.gotoFrame(e)},n.prototype.gotoAndStop=function(e){1!=arguments.length&&egret.$error(1022,"MovieClip.gotoAndStop()"),this.stop(),this.gotoFrame(e)},n.prototype.gotoFrame=function(e){var t;if("string"==typeof e){var n=this.getFrameLabelByName(e);if(!n)return;t=n.frame}else(t=parseInt(e+"",10))!=e&&egret.$error(1022,"Frame Label Not Found");t<1?t=1:t>this.$totalFrames&&(t=this.$totalFrames),this.$nextFrameNum=t,this.advanceFrame(),this.constructFrame(),this.handlePendingEvent()},n.prototype.advanceTime=function(e){var t=e*this.timeScale,n=this.frameIntervalTime,i=this.passedTime+t;this.passedTime=i%n;var r=i/n;if(!(r<1)){for(;r>=1;){if(r--,this.$nextFrameNum++,this.$nextFrameNum>this.$totalFrames||this.$frameLabelStart>0&&this.$nextFrameNum>this.$frameLabelEnd)if(-1==this.playTimes)this.$eventPool.push(egret.Event.LOOP_COMPLETE),this.$nextFrameNum=1;else{if(this.playTimes--,!(this.playTimes>0)){this.$nextFrameNum=this.$totalFrames,this.$eventPool.push(egret.Event.COMPLETE),this.stop();break}this.$eventPool.push(egret.Event.LOOP_COMPLETE),this.$nextFrameNum=1}this.$currentFrameNum==this.$frameLabelEnd&&(this.$nextFrameNum=this.$frameLabelStart),this.advanceFrame()}this.constructFrame(),this.handlePendingEvent()}},n.prototype.advanceFrame=function(){this.$currentFrameNum=this.$nextFrameNum;var e=this.frameEvents[this.$nextFrameNum];e&&""!=e&&n.DISPATCH_ENABLE&&egret.MovieClipEvent.dispatchMovieClipEvent(this,egret.MovieClipEvent.FRAME_LABEL,e)},n.prototype.constructFrame=function(){var e=this.$currentFrameNum;if(this.displayedKeyFrameNum!=e){var t=this.$movieClipData.getTextureByFrame(e);if(this.$texture=t,this.$movieClipData.$getOffsetByFrame(e,this.offsetPoint),this.displayedKeyFrameNum=e,this.$renderDirty=!0,egret.nativeRender)this.$nativeDisplayObject.setDataToBitmapNode(this.$nativeDisplayObject.id,t,[t.$bitmapX,t.$bitmapY,t.$bitmapWidth,t.$bitmapHeight,this.offsetPoint.x,this.offsetPoint.y,t.$getScaleBitmapWidth(),t.$getScaleBitmapHeight(),t.$sourceWidth,t.$sourceHeight]),this.$nativeDisplayObject.setWidth(t.$getTextureWidth()+this.offsetPoint.x),this.$nativeDisplayObject.setHeight(t.$getTextureHeight()+this.offsetPoint.y);else{var n=this.$parent;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp());var i=this.$maskedObject;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp())}if(this.$actions.containsKey(this.currentFrame)){var r=this.$actions.get(this.currentFrame);r&&r.numActions>0&&r.executeActions(this,e)}}},n.prototype.$renderFrame=function(){this.$texture=this.$movieClipData.getTextureByFrame(this.$currentFrameNum),this.$renderDirty=!0;var e=this.$parent;e&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp());var t=this.$maskedObject;t&&!t.$cacheDirty&&(t.$cacheDirty=!0,t.$cacheDirtyUp())},n.prototype.handlePendingEvent=function(){if(0!=this.$eventPool.length){this.$eventPool.reverse();for(var e=this.$eventPool,t=e.length,i=!1,r=!1,o=0;o<t;o++){var a=e.pop();a==egret.Event.LOOP_COMPLETE?r=!0:a==egret.Event.COMPLETE?i=!0:n.DISPATCH_ENABLE&&this.dispatchEventWith(a)}r&&n.DISPATCH_ENABLE&&this.dispatchEventWith(egret.Event.LOOP_COMPLETE),i&&n.DISPATCH_ENABLE&&this.dispatchEventWith(egret.Event.COMPLETE)}},Object.defineProperty(n.prototype,"totalFrames",{get:function(){return this.$totalFrames},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentFrame",{get:function(){return this.$currentFrameNum},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentFrameLabel",{get:function(){var e=this.getFrameLabelByFrame(this.$currentFrameNum);return e&&e.name},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentLabel",{get:function(){var e=this.getFrameLabelForFrame(this.$currentFrameNum);return e?e.name:null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"frameRate",{get:function(){return this.$frameRate},set:function(e){e!=this.$frameRate&&(this.$frameRate=e,this.frameIntervalTime=1e3/this.$frameRate)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isPlaying",{get:function(){return this.$isPlaying},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"movieClipData",{get:function(){return this.$movieClipData},set:function(e){this.setMovieClipData(e)},enumerable:!0,configurable:!0}),n.prototype.setMovieClipData=function(e,t){(this.$movieClipData!=e||t)&&(this.$movieClipData=e,this.$init())},n.prototype.setPlayTimes=function(e){(e<0||e>=1)&&(this.playTimes=e<0?-1:Math.floor(e))},n.prototype.setIsStopped=function(e){this.isStopped!=e&&(this.isStopped=e,e?xgame.TimelineManager.Instance().getOrCreateTimeline(this.timeline).remove(this):(this.playTimes=0==this.playTimes?1:this.playTimes,this.lastTime=egret.getTimer(),xgame.TimelineManager.Instance().getOrCreateTimeline(this.timeline).add(this)))},n.prototype.getActionAt=function(t){return t<1||t>this.totalFrames?null:(this.$actions.containsKey(t)||this.$actions.add(t,new e.FrameAction(t)),this.$actions.get(t))},n.prototype.addFrameAction=function(e,t,n){this.getActionAt(e).addAction(t,n)},n.prototype.removeFrameAction=function(e,t,n){this.getActionAt(e).removeAction(t,n)},n.prototype.removeFrameActions=function(e){isNaN(e)?this.$actions.forValues(function(e){e.removeActions()},this):this.getActionAt(e).removeActions()},n.DISPATCH_ENABLE=!1,n}(egret.DisplayObject);e.MovieClip=t,__reflect(t.prototype,"egretx.MovieClip",["xgame.IAnimatable","xgame.IXObject"])}(egretx||(egretx={})),function(e){e.IAnimationManager=Symbol.for("IAnimationManager")}(egretx||(egretx={})),function(e){e.IAnimationManagerInternal=Symbol.for("IAnimationManagerInternal")}(egretx||(egretx={})),function(e){var t=function(t){function n(){return t.call(this)||this}return __extends(n,t),n.prototype.initialize=function(){this.background=new e.MusicAudioChannel,this.ui=new e.MusicAudioChannel,this.effect=new e.EffectAudioChannel},n}(xgame.Singleton);e.AudioManager=t,__reflect(t.prototype,"egretx.AudioManager",["egretx.IAudioManager","xgame.IXObject","egretx.IAudioManagerInternal"])}(egretx||(egretx={})),function(e){var t;!function(e){e[e.OFF=0]="OFF",e[e.ON=1]="ON"}(t=e.AudioToggleState||(e.AudioToggleState={}));var n=function(e){function n(n){var i=e.call(this)||this;return i.channelType=n,i.callback_onPlayCompleted=new xgame.Signal1,i.$toggleState=t.ON,i.$volume=.5,i.playTimes=1,i}return __extends(n,e),n.prototype.onPlayCompleted=function(){return this.callback_onPlayCompleted},Object.defineProperty(n.prototype,"toggleState",{get:function(){return this.$toggleState},enumerable:!0,configurable:!0}),n.prototype.toggleOn=function(){this.toggleState!=t.ON&&(this.$toggleState=t.ON,this.resume())},n.prototype.toggleOff=function(){this.toggleState!=t.OFF&&(this.$toggleState=t.OFF,this.stop())},Object.defineProperty(n.prototype,"volume",{get:function(){return this.$volume},enumerable:!0,configurable:!0}),n.prototype.setVolume=function(e){this.$volume=e},n.prototype.play=function(e,t){void 0===t&&(t=1)},n.prototype.pause=function(){},n.prototype.resume=function(){},n.prototype.stop=function(){},n}(xgame.XObject);e.AudioChannel=n,__reflect(n.prototype,"egretx.AudioChannel")}(egretx||(egretx={})),function(e){var t=function(t){function n(){var i=t.call(this,e.AudioChannelType.EFFECT)||this;i.freeAudioes=[],i.playAudioes=[];for(var r=0;r<n.instanceMax;r++)e.AudioManager.Instance().createAudioInstance?i.freeAudioes.push(e.AudioManager.Instance().createAudioInstance("effect")):i.freeAudioes.push(new e.WebAudio("effect"));return i}return __extends(n,t),n.prototype.play=function(e,t){var n=this;if(this.freeAudioes.length){var i=this.freeAudioes.shift();this.playAudioes.push(i),i.play(e,0,t).then(function(){n.releaseAudio(i)})}else console.log("没有可用的播放器了，放弃播放音效:"+e)},n.prototype.pause=function(){for(var e=this.playAudioes.length-1;e>=0;e--){this.playAudioes[e].pause()}},n.prototype.resume=function(){for(var e=this.playAudioes.length-1;e>=0;e--){this.playAudioes[e].resume()}},n.prototype.stop=function(){for(;this.playAudioes.length;){var e=this.playAudioes.pop();e.stop(),this.freeAudioes.unshift(e)}},n.prototype.releaseAudio=function(e){var t=this.playAudioes.indexOf(e);t>=0&&this.playAudioes.splice(t,1),-1==this.freeAudioes.indexOf(e)&&this.freeAudioes.unshift(e)},n.instanceMax=3,n}(e.AudioChannel);e.EffectAudioChannel=t,__reflect(t.prototype,"egretx.EffectAudioChannel")}(egretx||(egretx={})),function(e){var t=function(t){function n(){var n=t.call(this,e.AudioChannelType.BACKGORUND)||this;return e.AudioManager.Instance().createAudioInstance?n.main=e.AudioManager.Instance().createAudioInstance("music"):n.main=new e.WebAudio("music"),n}return __extends(n,t),n.prototype.play=function(e,t){this.key=e,this.playTimes=t,this.main.play(e,0,t)},n.prototype.pause=function(){this.main.pause()},n.prototype.resume=function(){this.main.resume()},n.prototype.stop=function(){this.main.stop()},n}(e.AudioChannel);e.MusicAudioChannel=t,__reflect(t.prototype,"egretx.MusicAudioChannel")}(egretx||(egretx={})),function(e){var t=function(e){function t(t){void 0===t&&(t="EFFECT");var n=e.call(this)||this;return n.type=t,n.$volume=.5,n}return __extends(t,e),Object.defineProperty(t.prototype,"info",{get:function(){return this.key&&RES.getResourceInfo(this.key)},enumerable:!0,configurable:!0}),t.prototype.load=function(){return null},t.prototype.play=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=0),null},t.prototype.pause=function(){},t.prototype.resume=function(){},t.prototype.stop=function(){},Object.defineProperty(t.prototype,"volume",{get:function(){return this.$volume},enumerable:!0,configurable:!0}),t.prototype.setVolume=function(e){this.$volume=e},t.prototype.destroy=function(){},t}(xgame.XObject);e.Audio=t,__reflect(t.prototype,"egretx.Audio")}(egretx||(egretx={})),function(e){!function(e){e[e.BACKGORUND=0]="BACKGORUND",e[e.EFFECT=1]="EFFECT"}(e.AudioChannelType||(e.AudioChannelType={}))}(egretx||(egretx={})),function(e){var t=function(t){function n(e){var n=t.call(this,e)||this;return n.position=0,n.$isPaused=!1,n}return __extends(n,t),n.prototype.load=function(){this.sound=new egret.Sound,this.sound.type=this.type,this.sound.addEventListener(egret.Event.COMPLETE,this.onLoadComplete,this),this.sound.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onIOError,this),this.loadDeferred=new xgame.Deferred;var t=this.info.root+this.info.url;return e.AudioManager.Instance().redirectURL&&(t=e.AudioManager.Instance().redirectURL(t)),this.sound.load(t),this.loadDeferred.promise},n.prototype.onIOError=function(e){console.warn("WebAudio=>onIOError",e),this.sound.removeEventListener(egret.Event.COMPLETE,this.onLoadComplete,this),this.sound.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onIOError,this),this.loadDeferred.resolve(!1)},n.prototype.onLoadComplete=function(e){this.sound.removeEventListener(egret.Event.COMPLETE,this.onLoadComplete,this),this.sound.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onIOError,this),this.loadDeferred.resolve(!0)},n.prototype.play=function(e,t,n){var i=this;return void 0===t&&(t=0),void 0===n&&(n=0),this.stop(),this.key=e,this.playTimes=n,this.playDeferred=new xgame.Deferred,this.load().then(function(e){e?i._play(t):i.playDeferred.resolve()}),this.playDeferred.promise},n.prototype._play=function(e){this.$isPaused=!1,this.soundChannel=this.sound.play(e,this.playTimes),this.soundChannel.volume=this.volume,this.soundChannel.addEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this)},n.prototype.onSoundComplete=function(){this.playTimes>0&&(this.playTimes--,this.playTimes<=0&&(this.playDeferred&&this.playDeferred.resolve(),this.stop()))},Object.defineProperty(n.prototype,"isPaused",{get:function(){return this.$isPaused},enumerable:!0,configurable:!0}),n.prototype.pause=function(){!this.isPaused&&this.soundChannel&&(this.$isPaused=!0,this.position=this.soundChannel.position,this.clearChannel())},n.prototype.resume=function(){this.isPaused&&(this.$isPaused=!1,this._play(this.position))},n.prototype.clearChannel=function(){this.soundChannel&&(this.soundChannel.stop(),this.soundChannel.removeEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this),this.soundChannel=null)},n.prototype.stop=function(){if(this.playDeferred=void 0,this.$isPaused=!1,this.position=0,this.clearChannel(),this.sound){this.sound.removeEventListener(egret.Event.COMPLETE,this.onLoadComplete,this),this.sound.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onIOError,this);try{this.sound.close()}catch(e){}}},n}(e.Audio);e.WebAudio=t,__reflect(t.prototype,"egretx.WebAudio")}(egretx||(egretx={})),function(e){e.IAudioManager=Symbol.for("IAudioManager")}(egretx||(egretx={})),function(e){e.IAudioManagerInternal=Symbol.for("IAudioManagerInternal")}(egretx||(egretx={})),function(e){e.event=xgame.event}(egretx||(egretx={})),function(e){e.impl=xgame.impl}(egretx||(egretx={})),function(e){e.inject=xgame.inject}(egretx||(egretx={})),function(e){e.injectable=xgame.injectable}(egretx||(egretx={})),function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.pools=new xgame.PoolGroup("Armature"),e}return __extends(n,t),n.prototype.advanceTime=function(e){this.factory&&this.factory.clock.advanceTime(e/1e3)},n.prototype.initialize=function(){xgame.TimelineManager.Instance().getOrCreateTimeline().add(this)},n.prototype.fetch=function(t,n,i){var r="{0}:{1}".format(t,n);return i&&(r="{0}:{1}".format(t,i)),this.pools.fetch(r,e.Armature,function(){return new e.Armature(t,n,i)},this)},n.prototype.recycle=function(t){this.pools.recycle(t.id,e.Armature,t)},n.prototype.release=function(e){var t=this;this.pools.pools.forKeys(function(n){n.split(":")[0]==e&&t._release(n)},this,!0)},n.prototype._release=function(t){if(this.pools.getPool(t,e.Armature).expired){this.pools.release(t,e.Armature);var n=t.split(":"),i=n[0],r=n[2]||i;this.clearDragonBones(i,r),e.ResourceManager.Instance().getOrCreateGroup(e.ResourceType.DragonBones).release(i)}},n.prototype.releases=function(){var e=this;this.pools.pools.forKeys(function(t){e._release(t)},this,!0)},n.prototype.addClock=function(e){e.armature&&this.factory.clock.add(e.armature)},n.prototype.removeClock=function(e){e.armature&&this.factory.clock.remove(e.armature)},n.prototype.parseDragonBones=function(e,t){t=t||e,this.factory||(this.factory=new dragonBones.EgretFactory);var n=this.getRes(e,t);this.factory.getDragonBonesData(e)||this.factory.parseDragonBonesData(RES.getRes(n.skeleton),e),this.factory.getTextureAtlasData(t)||this.factory.parseTextureAtlasData(RES.getRes(n.json),RES.getRes(n.texture),t)},n.prototype.clearDragonBones=function(e,t){t=t||e;this.getRes(e,t);this.factory.getDragonBonesData(e)&&(this.factory.removeDragonBonesData(e),console.log("DragonBonesManager.removeDragonBonesData({0})".format(e))),this.factory.getTextureAtlasData(t)&&(this.factory.removeTextureAtlasData(t),console.log("DragonBonesManager.removeTextureAtlasData({0})".format(t)))},n.prototype.buildArmature=function(e,t){return this.factory.buildArmature(t,e)},n.prototype.getRes=function(e,t){var n={};return n.skeleton="{0}_ske_json".format(e),t?(n.json="{0}_tex_json".format(t),n.texture="{0}_tex_png".format(t)):(n.json="{0}_tex_json".format(e),n.texture="{0}_tex_png".format(e)),n},n}(xgame.Singleton);e.DragonBonesManager=t,__reflect(t.prototype,"egretx.DragonBonesManager",["egretx.IDragonBonesManager","xgame.IXObject","egretx.IDragonBonesManagerInternal","xgame.IAnimatable"])}(egretx||(egretx={})),function(e){var t=function(t){function n(e,n,i){var r=t.call(this)||this;return r.key=e,r.armatureName=n,r.texture=i,r}return __extends(n,t),Object.defineProperty(n.prototype,"id",{get:function(){var e=this.key+":"+this.armatureName;return this.texture&&(e=this.key+":"+this.texture),e},enumerable:!0,configurable:!0}),n.prototype.setParent=function(e){this.armature&&this.armature.display&&e.addChild(this.armature.display)},n.prototype.removeSelf=function(){this.armature.display&&this.armature.display.parent&&this.armature.display.parent.removeChild(this.armature.display)},n.prototype.release=function(){this.dispose(),this.armature&&this.armature.dispose(),this.$armature=void 0},n.prototype.dispose=function(){this.armature&&(this.armature.animation.stop(),e.DragonBonesManager.Instance().removeClock(this)),this.removeSelf()},Object.defineProperty(n.prototype,"armature",{get:function(){return this.$armature},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"display",{get:function(){return this.armature&&this.armature.display},enumerable:!0,configurable:!0}),n.prototype.createArmature=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return this.armature?[3,2]:[4,e.ResourceManager.Instance().getOrCreateGroup(e.ResourceType.DragonBones).load(this.key,this.texture)];case 1:t.sent(),e.DragonBonesManager.Instance().parseDragonBones(this.key,this.texture),this.$armature=e.DragonBonesManager.Instance().buildArmature(this.key,this.armatureName),t.label=2;case 2:return this.armature&&e.DragonBonesManager.Instance().addClock(this),[2]}})})},n}(xgame.XObject);e.Armature=t,__reflect(t.prototype,"egretx.Armature",["xgame.IPoolable","xgame.IDisposable","xgame.IXObject"])}(egretx||(egretx={})),function(e){e.IDragonBonesManager=Symbol.for("IDragonBonesManager")}(egretx||(egretx={})),function(e){e.IDragonBonesManagerInternal=Symbol.for("IDragonBonesManagerInternal")}(egretx||(egretx={})),function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.tasks=new xgame.Dictionary,e.disposableGroup=new xgame.DisposableGroup,e.values=new xgame.Dictionary,e.completedIDList=[],e.isFirstClean=!0,e.$isStarted=!1,e.$isPaused=!1,e}return __extends(n,t),n.prototype.initialize=function(){this.disposableGroup.registerUpdate(this.advanceTime,this)},n.prototype.isCompleted=function(e){return this.completedIDList.indexOf(e)>=0},n.prototype.getTask=function(e){return this.tasks.get(e)},n.prototype.getStep=function(e,t){if(this.tasks.containsKey(e))return this.tasks.get(e).getStep(t)},n.prototype.addTask=function(e){if(!e.ID||this.tasks.containsKey(e.ID))throw new Error("添加引导任务({0})失败".format(e.ID));return this.tasks.add(e.ID,e),xgame.injectInstance(e),e.onInit(),e},n.prototype.clearValues=function(e){e?this.tasks.containsKey(e)&&this.tasks.get(e).clearValues():this.values.clear()},n.prototype.injectValue=function(e,t,n){n?this.tasks.containsKey(n)&&this.tasks.get(n).injectValue(e,t):this.values.set(e,t)},n.prototype.removeValue=function(e,t){t?this.tasks.containsKey(t)&&this.tasks.get(t).removeValue(e):this.values.remove(e)},n.prototype.retrieveValue=function(e,t,n){if(n){if(this.tasks.containsKey(n))return this.tasks.get(n).retrieveValue(e,t)}else if(this.values.containsKey(e))return this.values.get(e);return t},n.prototype.advanceTime=function(){var e=this;this.isStarted&&(this.isPaused||(this.isFirstClean&&(this.isFirstClean=!1,this.tasks.forValues(function(t){t.checkRemoveWithCompleted()&&(e.tasks.remove(t.ID),-1==e.completedIDList.indexOf(t.ID)&&e.completedIDList.push(t.ID),t.dispose())},this,!0)),this.activityTask?this.activityTask.checkComplete()?(this.activityTask.onComplete(),this.tasks.remove(this.activityTask.ID),-1==this.completedIDList.indexOf(this.activityTask.ID)&&this.completedIDList.push(this.activityTask.ID),this.activityTask.dispose(),this.$activityTask=void 0):this.activityTask.advanceTime():this.tasks.forValues(function(t){if(t.checkBegin())return e.$activityTask=t,t.onBegin(),!0},this)))},Object.defineProperty(n.prototype,"activityTask",{get:function(){return this.$activityTask},enumerable:!0,configurable:!0}),n.prototype.setActivityTask=function(e){this.$activityTask=e},Object.defineProperty(n.prototype,"isStarted",{get:function(){return this.$isStarted},enumerable:!0,configurable:!0}),n.prototype.start=function(){this.isStarted||(this.$isStarted=!0)},Object.defineProperty(n.prototype,"isPaused",{get:function(){return this.$isPaused},enumerable:!0,configurable:!0}),n.prototype.pause=function(){this.isStarted&&(this.activityTask||this.isPaused||(this.$isPaused=!0))},n.prototype.resume=function(){this.isStarted&&(this.activityTask||this.isPaused&&(this.$isPaused=!1))},n.prototype.cancelActiveTask=function(){return!(!this.isStarted||!this.activityTask||this.activityTask.state==e.GuideTaskState.Completed)&&(this.activityTask.onCancel(),this.guideHelper.cancelGuide(this.activityTask.ID),this.$activityTask=void 0,this.pause(),!0)},n}(xgame.Singleton);e.GuideManager=t,__reflect(t.prototype,"egretx.GuideManager",["egretx.IGuideManager","xgame.IXObject","egretx.IGuideManagerInternal"])}(egretx||(egretx={})),function(e){var t;!function(e){e[e.Ready=0]="Ready",e[e.Running=1]="Running",e[e.Completed=2]="Completed"}(t=e.GuideStepState||(e.GuideStepState={}));var n=function(n){function i(e,i,r){var o=n.call(this)||this;return o.parent=e,o.index=i,o.params=r,o.$state=t.Ready,o}return __extends(i,n),Object.defineProperty(i.prototype,"taskID",{get:function(){return this.parent&&this.parent.ID},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"target",{get:function(){return this.params.target},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"tips",{get:function(){return this.params.tips},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"state",{get:function(){return this.$state},enumerable:!0,configurable:!0}),i.prototype.setState=function(e){this.$state=e},i.prototype.reset=function(){this.$state=t.Ready},i.prototype.advanceTime=function(){},i.prototype.dispose=function(){},i.prototype.onBegin=function(){e.GuideManager.Instance().guideHelper.beginGuide(this.parent.ID,this.index)},i.prototype.onComplete=function(){e.GuideManager.Instance().guideHelper.endGuide(this.parent.ID,this.index)},i}(xgame.XObject);e.GuideStep=n,__reflect(n.prototype,"egretx.GuideStep",["xgame.IDisposable","xgame.IXObject"])}(egretx||(egretx={})),function(e){var t,n;!function(e){e[e.Ready=0]="Ready",e[e.Running=1]="Running",e[e.Completed=2]="Completed"}(t=e.GuideTaskState||(e.GuideTaskState={})),function(e){e[e.Weak=0]="Weak",e[e.Force=1]="Force"}(n=e.GuideTaskType||(e.GuideTaskType={}));var i=function(i){function r(e,r,o){void 0===r&&(r=n.Weak);var a=i.call(this)||this;return a.ID=e,a.taskType=r,a.frontID=o,a.values=new xgame.Dictionary,a.steps=new xgame.Dictionary,a.$activeIndex=-1,a.$state=t.Ready,a}return __extends(r,i),r.prototype.getStep=function(e){return this.steps.get(e)},r.prototype.addStep=function(t){var n;t instanceof e.GuideStep?((n=t).index=this.steps.length,n.parent=this):((n=new e.GuideStep(this,this.steps.length,t)).checkBegin=t.checkBegin,n.checkComplete=t.checkComplete),this.steps.add(n.index,n)},Object.defineProperty(r.prototype,"activeIndex",{get:function(){return this.$activeIndex},enumerable:!0,configurable:!0}),r.prototype.setActiveIndex=function(e){var t=this;this.$activeIndex=e,this.steps.forValues(function(i){i.index!=e&&t.taskType==n.Weak&&i.reset()},this,!0)},r.prototype.onInit=function(){},r.prototype.checkRemoveWithCompleted=function(){return!1},r.prototype.checkBegin=function(){return!(this.frontID&&!e.GuideManager.Instance().isCompleted(this.frontID))},r.prototype.onBegin=function(){this.$state=t.Running},r.prototype.checkComplete=function(){return this.steps.last().value.state==e.GuideStepState.Completed},r.prototype.onComplete=function(){this.$state=t.Completed},r.prototype.onCancel=function(){this.$activeIndex=-1,this.steps.forValues(function(e){e.reset()},this)},r.prototype.reset=function(){this.$state=t.Ready,this.values.clear(),this.$activeIndex=-1},r.prototype.advanceTime=function(){var t=this;if(this.activeIndex>=0){var n=this.getStep(this.activeIndex);n.state===e.GuideStepState.Ready?n.checkBegin()&&(n.setState(e.GuideStepState.Running),n.onBegin()):n.state===e.GuideStepState.Running&&(n.advanceTime(),n.checkComplete()&&(n.setState(e.GuideStepState.Completed),n.onComplete(),n.index<this.steps.length-1&&this.$activeIndex++))}else this.steps.forValues(function(n){if(-1==t.activeIndex&&n.checkBegin())return n.setState(e.GuideStepState.Running),n.onBegin(),t.$activeIndex=n.index,!0},this,!0)},r.prototype.dispose=function(){this.steps.clear(function(e){e.dispose()}),this.values.clear()},Object.defineProperty(r.prototype,"state",{get:function(){return this.$state},enumerable:!0,configurable:!0}),r.prototype.setState=function(e){this.$state=e},r.prototype.clearValues=function(){this.values.clear()},r.prototype.injectValue=function(e,t){this.values.set(e,t)},r.prototype.removeValue=function(e){this.values.remove(e)},r.prototype.retrieveValue=function(e,t){return this.values.containsKey(e)?this.values.get(e):t},r}(xgame.XObject);e.GuideTask=i,__reflect(i.prototype,"egretx.GuideTask",["xgame.IDisposable","xgame.IXObject"])}(egretx||(egretx={})),function(e){e.IGuideManager=Symbol.for("IGuideManager")}(egretx||(egretx={})),function(e){e.IGuideManagerInternal=Symbol.for("IGuideManagerInternal")}(egretx||(egretx={})),function(e){e.IHttpManager=Symbol.for("IHttpManager"),e.IHttpManagerInternal=Symbol.for("IHttpManagerInternal")}(egretx||(egretx={})),function(e){var t=function(t){function n(){var n=t.call(this)||this;return n.pools=new xgame.PoolObject(e.HttpRequest),n}return __extends(n,t),n.prototype.initialize=function(){},n.prototype.sendRequest=function(t,n,i,r){return __awaiter(this,void 0,void 0,function(){var o,a,s,c;return __generator(this,function(u){switch(u.label){case 0:if(o="string"==typeof t?{uri:t,method:n,values:i,isJSON:r}:t,a=this.pools.fetch(function(){return new e.HttpRequest(o.uri,o.method)},this),o.headers)for(s=0;s<o.headers.length;s++)a.setHeader(o.headers[s][0],o.headers[s][1]);if(o.values)for(s=0;s<o.values.length;s++)a.setValue(o.values[s][0],o.values[s][1]);return[4,a.send(o.isJSON)];case 1:return c=u.sent(),this.pools.recycle(a),[2,c]}})})},n=__decorate([e.impl(e.IHttpManager),__metadata("design:paramtypes",[])],n)}(xgame.Singleton);e.HttpManager=t,__reflect(t.prototype,"egretx.HttpManager",["egretx.IHttpManager","xgame.IXObject","egretx.IHttpManagerInternal"])}(egretx||(egretx={})),function(e){e.ISocketManager=Symbol.for("ISocketManager"),e.ISocketManagerInternal=Symbol.for("ISocketManagerInternal")}(egretx||(egretx={})),function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.defaultInstanceName="main",e.retryMaxTiems=3,e.retryDelayTime=5e3,e.sendTimeout=1e4,e.heartBeatCheckTimeout=1e4,e.instances=new xgame.Dictionary,e}return __extends(n,t),n.prototype.initialize=function(){},n.prototype.getOrCreateInstance=function(t,n){if(t=t||this.defaultInstanceName,!this.instances.containsKey(t)){var i=new e.SocketInstance(this,t,n||this.defaultSocketHelper);this.instances.push(t,i)}return this.instances.get(t)},n=__decorate([e.impl(e.ISocketManager),__metadata("design:paramtypes",[])],n)}(xgame.Singleton);e.SocketManager=t,__reflect(t.prototype,"egretx.SocketManager",["egretx.ISocketManager","xgame.IXObject","egretx.ISocketManagerInternal"])}(egretx||(egretx={})),function(e){var t=function(e){function t(t,n){var i=e.call(this)||this;return i.uri=t,i.method=n,i.reconnectTimes=5,i.headers=new xgame.Dictionary,i.values=new xgame.Dictionary,i}return __extends(t,e),t.prototype.release=function(){},t.prototype.dispose=function(){this.headers.clear(),this.values.clear(),this.uri=void 0,this.method=void 0},t.prototype.setUri=function(e){this.uri=e},t.prototype.setMethod=function(e){void 0===e&&(e=egret.HttpMethod.GET),this.method=e},t.prototype.setHeader=function(e,t){this.headers.set(e,t)},t.prototype.setValue=function(e,t){this.values.set(e,t)},t.prototype.send=function(e){return __awaiter(this,void 0,void 0,function(){var t,n;return __generator(this,function(i){switch(i.label){case 0:n=this.reconnectTimes,i.label=1;case 1:return n?[4,this.request()]:[3,6];case 2:return"boolean"!=typeof(t=i.sent())?[3,4]:(n--,[4,xgame.waitMilliseconds(500)]);case 3:return i.sent(),[3,5];case 4:return[3,6];case 5:return[3,1];case 6:if("boolean"==typeof t)return[2,void 0];if(!e)return[2,t];try{return[2,JSON.parse(t)]}catch(e){}return[2,void 0]}})})},t.prototype.request=function(){return __awaiter(this,void 0,void 0,function(){var e=this;return __generator(this,function(t){return this.method=this.method||egret.HttpMethod.GET,[2,new Promise(function(t,n){var i=new egret.HttpRequest;if(i.open(e.uri,e.method),e.method==egret.HttpMethod.GET||0==e.values.length)i.send();else{i.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var r="";e.headers.forKeys(function(t){i.setRequestHeader(t,e.headers.get(t))},e),e.values.forKeys(function(t){r+=t+"="+e.values.get(t)+"&"},e),i.send(r)}i.addEventListener(egret.Event.COMPLETE,function(){t(i.response)},e),i.addEventListener(egret.IOErrorEvent.IO_ERROR,function(){t(!1)},e)})]})})},t}(xgame.XObject);e.HttpRequest=t,__reflect(t.prototype,"egretx.HttpRequest",["xgame.IPoolable","xgame.IDisposable","xgame.IXObject"])}(egretx||(egretx={})),function(e){var t,n;!function(e){e[e.Closed=0]="Closed",e[e.Connecting=1]="Connecting",e[e.Connected=2]="Connected"}(t=e.SocketState||(e.SocketState={})),function(e){e[e.Close=0]="Close",e[e.IOError=1]="IOError",e[e.Failed=2]="Failed"}(n=e.SocketCloseCode||(e.SocketCloseCode={}));var i=function(e){function i(t,n,i){var r=e.call(this)||this;return r.manager=t,r.name=n,r.socketHelper=i,r.guidCount=0,r.isInited=!1,r.happendConnected=!1,r.isReconnect=!1,r.disposableGroup=new xgame.DisposableGroup,r.recvQueues=[],r.sendTimeoutStamp=0,r.lastestRecvStamp=0,r.checkHeartBeat=!1,r.sendQueues=[],r.callback_onConnected=new xgame.Signal0,r.callback_onKickOut=new xgame.Signal0,r.callback_onClosed=new xgame.Signal1,r.reconnectTimerID=0,r.callback_onConnecting=new xgame.Signal1,r.retryCount=0,r.callback_onShutdown=new xgame.Signal0,r}return __extends(i,e),i.prototype.generateGUID=function(){return++this.guidCount},Object.defineProperty(i.prototype,"state",{get:function(){return this.$state},enumerable:!0,configurable:!0}),i.prototype.onAdvanceTime=function(){for(;this.recvQueues.length;){var e=this.recvQueues.shift();e.guid&&this.current&&this.current.guid==e.guid&&(this.socketHelper.needSendLoginPacket()&&this.socketHelper.isLoginRespPacket(e)&&this.socketHelper.isLoginSuccess(e)&&(this.isReconnect=!0),this.current=null,this.sendQueues.shift()),this.socketHelper.receivePacket(e)}this.state==t.Connected&&(!this.current&&this.sendQueues.length&&(this.current=this.sendQueues[0],this._sendPacket(this.current),this.sendTimeoutStamp=xgame.Time.Instance().passedTime+this.manager.sendTimeout),this.current&&this.sendTimeoutStamp<xgame.Time.Instance().passedTime&&(this._close(),this.connect()),this.socketHelper.enableHeartBeatCheck()&&!this.checkHeartBeat&&xgame.Time.Instance().getTimeStamp()-this.lastestRecvStamp>this.manager.heartBeatCheckTimeout&&(this.checkHeartBeat=!0,this.socketHelper.sendHeartBeatPacket()))},i.prototype._sendPacket=function(e){this.socketHelper.showAnimation();var t=this.socketHelper.encodePacket(e);t&&t.length&&this.socket.writeBytes(t)},i.prototype.sendPacket=function(e){if(e.guid=this.generateGUID(),e.first){for(var t=this.sendQueues.length-1;t>=0;t++)this.socketHelper.isLoginRespPacket(this.sendQueues[t])&&this.sendQueues.splice(t,1);this.sendQueues.unshift(e)}else this.sendQueues.push(e)},i.prototype.setURI=function(e,t,n){this.uri=t?n?"wss://":"ws://"+e+":"+t:e},i.prototype.init=function(){this.isInited||(this.isInited=!0,this.guidCount=Math.floor(xgame.Time.Instance().getTimeStamp()/1e3),this.cleanQueues(),this.disposableGroup.registerUpdate(this.onAdvanceTime,this),this.socket=new egret.WebSocket,this.socket.type=egret.WebSocket.TYPE_BINARY,this.socket.addEventListener(egret.Event.CONNECT,this.onConnectHandler,this),this.socket.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.onReceiveHandler,this),this.socket.addEventListener(egret.Event.CLOSE,this.onCloseHandler,this),this.socket.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onIOErrorHandler,this),this.$state=t.Closed)},i.prototype.onConnected=function(){return this.callback_onConnected},i.prototype.onConnectHandler=function(e){this.$state=t.Connected,this.socketHelper.hideAnimation(),this.callback_onConnected.dispatch(),this.happendConnected=!0,this.socketHelper.needSendLoginPacket()&&this.sendLoginPacket()},i.prototype.sendLoginPacket=function(){var e=this.socketHelper.generateLoginPacket(this.isReconnect);e&&(e.first=!0,this.sendPacket(e))},i.prototype.onKickOut=function(){return this.callback_onKickOut},i.prototype.onReceiveHandler=function(e){var t=this;this.socketHelper.hideAnimation(),this.lastestRecvStamp=xgame.Time.Instance().getTimeStamp();var n=new egret.ByteArray;this.socket.readBytes(n);var i=this.socketHelper.decodePackets(n);if(i&&i.length){var r=i[0];if(this.socketHelper.isDataLocked(r)?egret.setTimeout(function(){t.current=null},this,100):this.socketHelper.isKickOutPacket(r)?this.callback_onKickOut.dispatch():(this.recvQueues.push(r),this.socketHelper.isHeartBeatPacket(r)&&(this.checkHeartBeat=!1)),i.length>1)for(var o=1;o<i.length;o++)this.recvQueues.push(i[o])}},i.prototype.onClosed=function(){return this.callback_onClosed},i.prototype.onCloseHandler=function(e){var i=this;this.callback_onClosed.dispatch(n.Close),this.state==t.Connecting?this.reconnectTimerID=egret.setTimeout(function(){i._connect()},this,this.manager.retryDelayTime):this.state==t.Connected&&(this.$state=t.Closed,this.connect())},i.prototype.onIOErrorHandler=function(e){this.socketHelper.hideAnimation(),this.cleanQueues(!0),this.$state=t.Closed,this.callback_onClosed.dispatch(n.IOError)},i.prototype.onConnecting=function(){return this.callback_onConnecting},i.prototype.connect=function(){if(!this.socketHelper)throw new Error("没有实现网络助手ISocketHelper");this.isInited||this.init(),this.state==t.Closed&&(this.socketHelper.showAnimation(),this.retryCount=0,this.$state=t.Connecting,this._connect())},i.prototype._connect=function(){this.state==t.Connecting&&(this.retryCount<this.manager.retryMaxTiems?(this.happendConnected&&this.callback_onConnecting.dispatch(this.retryCount+1),this.socket.connectByUrl(this.uri),this.retryCount++):(this.cleanQueues(),this.$state=t.Closed,this.socketHelper.hideAnimation(),this.callback_onClosed.dispatch(n.Failed)))},i.prototype.cleanQueues=function(e){for(;this.sendQueues.length>0;){this.sendQueues.pop().abort()}e&&(this.recvQueues.length=0)},i.prototype.close=function(){this.state!=t.Closed&&this._close()},i.prototype._close=function(){this.state!=t.Closed&&(this.$state=t.Closed,this.socket&&this.socket.close()),this.reconnectTimerID&&(egret.clearTimeout(this.reconnectTimerID),this.reconnectTimerID=0)},i.prototype.onShutdown=function(){return this.callback_onShutdown},i.prototype.shutdown=function(){this.guidCount=Math.floor(xgame.Time.Instance().getTimeStamp()/1e3),this.socket&&(this.socket.removeEventListener(egret.Event.CONNECT,this.onConnectHandler,this),this.socket.removeEventListener(egret.ProgressEvent.SOCKET_DATA,this.onReceiveHandler,this),this.socket.removeEventListener(egret.Event.CLOSE,this.onCloseHandler,this),this.socket.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onIOErrorHandler,this)),this.close(),this.cleanQueues(!0),this.isInited=!1,this.happendConnected=!1,this.isReconnect=!1,this.socket=null,this.$state=t.Closed,this.callback_onShutdown.dispatch()},i}(xgame.XObject);e.SocketInstance=i,__reflect(i.prototype,"egretx.SocketInstance")}(egretx||(egretx={})),function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.groups=new xgame.Dictionary,e.loadQueues=new xgame.Dictionary,e}return __extends(n,t),n.prototype.initialize=function(){this.groups.add(e.ResourceType.MovieClip,new e.MovieClipResourceGroup(this)),this.groups.add(e.ResourceType.DragonBones,new e.DragonBonesResourceGroup(this))},n.prototype.getOrCreateGroup=function(e,t){var n=this.groups.get(e);return!n&&t&&(n=t(),this.groups.add(e,n)),n},n.prototype.loadResAsync=function(e){return __awaiter(this,void 0,void 0,function(){var t,n=this;return __generator(this,function(i){if(!RES.hasRes(e))throw new Error("资源配置:{0}找不到".format(e));return RES.getRes(e)?[2,RES.getRes(e)]:(this.loadQueues.containsKey(e)?t=this.loadQueues.get(e):(t={key:e,deferred:new xgame.Deferred},this.loadQueues.add(e,t),RES.getResAsync(e).then(function(){(t=n.loadQueues.remove(e)).deferred.resolve(RES.getRes(e))})),[2,t.deferred.promise])})})},n.prototype.destroyRes=function(e){return!!RES.getRes(e)&&(n.DEBUG&&console.log("ResourceManager.destroyRes({0})".format(e)),RES.destroyRes(e,!0))},n.DEBUG=!0,n}(xgame.Singleton);e.ResourceManager=t,__reflect(t.prototype,"egretx.ResourceManager",["egretx.IResourceManager","xgame.IXObject","egretx.IResourceManagerInternal"])}(egretx||(egretx={})),function(e){var t=function(t){function n(e,n){var i=t.call(this)||this;return i.manager=e,i.resourceType=n,i.keys=new xgame.Dictionary,i.statistics={},i.$memory=0,i}return __extends(n,t),n.prototype.createInstance=function(e){return null},n.prototype.load=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},n.prototype.release=function(t){if(this.keys.containsKey(t))for(var n=0,i=this.keys.get(t);n<i.length;n++){var r=i[n];e.ResourceManager.Instance().destroyRes(r)}},Object.defineProperty(n.prototype,"memory",{get:function(){return this.$memory},enumerable:!0,configurable:!0}),n.prototype.addMemory=function(e,t,n){if(null==this.statistics[e]){var i=t*n*4;this.statistics[e]=i,this.$memory+=i}},n.prototype.removeMemory=function(e){if(null!=this.statistics[e]){var t=this.statistics[e];this.$memory-=t,delete this.statistics[e]}},n}(xgame.XObject);e.ResourceGroup=t,__reflect(t.prototype,"egretx.ResourceGroup")}(egretx||(egretx={})),function(e){var t=function(t){function n(n){return t.call(this,n,e.ResourceType.DragonBones)||this}return __extends(n,t),n.prototype.load=function(t,n){return __awaiter(this,void 0,void 0,function(){var i,r,o;return __generator(this,function(a){switch(a.label){case 0:return i=e.DragonBonesManager.Instance().getRes(t,n),RES.hasRes(i.json)&&RES.hasRes(i.texture)&&RES.hasRes(i.skeleton)?[4,e.ResourceManager.Instance().loadResAsync(i.skeleton)]:[2];case 1:return a.sent(),[4,e.ResourceManager.Instance().loadResAsync(i.json)];case 2:return a.sent(),[4,e.ResourceManager.Instance().loadResAsync(i.texture)];case 3:return(r=a.sent())&&this.addMemory(t,r.$bitmapWidth,r.$bitmapHeight),this.keys.containsKey(t)?(-1==(o=this.keys.get(t)).indexOf(i.json)&&o.push(i.json),-1==o.indexOf(i.texture)&&o.push(i.texture),-1==o.indexOf(i.skeleton)&&o.push(i.skeleton)):(o=[i.json,i.texture,i.skeleton],this.keys.add(t,o)),[2]}})})},n}(e.ResourceGroup);e.DragonBonesResourceGroup=t,__reflect(t.prototype,"egretx.DragonBonesResourceGroup")}(egretx||(egretx={})),function(e){var t=function(t){function n(n){return t.call(this,n,e.ResourceType.MovieClip)||this}return __extends(n,t),n.prototype.load=function(t){return __awaiter(this,void 0,void 0,function(){var n,i,r;return __generator(this,function(o){switch(o.label){case 0:return n=e.AnimationManager.Instance().getRes(t),RES.hasRes(n.json)&&RES.hasRes(n.texture)?[4,e.ResourceManager.Instance().loadResAsync(n.json)]:[2];case 1:return o.sent(),[4,e.ResourceManager.Instance().loadResAsync(n.texture)];case 2:return(i=o.sent())&&this.addMemory(t,i.$bitmapWidth,i.$bitmapHeight),this.keys.containsKey(t)?(-1==(r=this.keys.get(t)).indexOf(n.json)&&r.push(n.json),-1==r.indexOf(n.texture)&&r.push(n.texture)):(r=[n.json,n.texture],this.keys.add(t,r)),[2]}})})},n}(e.ResourceGroup);e.MovieClipResourceGroup=t,__reflect(t.prototype,"egretx.MovieClipResourceGroup")}(egretx||(egretx={})),function(e){!function(e){e.UI="UI",e.MovieClip="MovieClip",e.DragonBones="DragonBones"}(e.ResourceType||(e.ResourceType={}))}(egretx||(egretx={})),function(e){e.IResourceManager=Symbol.for("IResourceManager")}(egretx||(egretx={})),function(e){e.IResourceManagerInternal=Symbol.for("IResourceManagerInternal")}(egretx||(egretx={}));